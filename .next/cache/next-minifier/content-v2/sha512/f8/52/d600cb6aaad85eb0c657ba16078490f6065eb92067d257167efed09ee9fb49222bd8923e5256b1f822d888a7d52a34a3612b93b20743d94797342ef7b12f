{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{QCli:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/checkout\",function(){return n(\"fdRS\")}])},WuuX:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));var a=n(\"vJKn\"),i=n.n(a),s=n(\"HALo\"),o=n(\"rg98\"),r=n(\"q1tI\"),c=n.n(r).a.createElement;function h(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(i.a.mark((function e(){var t,n,a,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:\"\",!window.__user){e.next=3;break}return e.abrupt(\"return\",window.__user);case 3:return e.next=5,fetch(\"/api/auth/me\",t?{headers:{cookie:t}}:{});case 5:if((n=e.sent).ok){e.next=9;break}return delete window.__user,e.abrupt(\"return\",null);case 9:return e.next=11,n.json();case 11:return a=e.sent,window.__user=a,e.abrupt(\"return\",a);case 14:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return function(t){var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).required,t=Object(r.useState)((function(){return!window.__user})),n=t[0],a=t[1],i=Object(r.useState)((function(){return window.__user||null})),s=i[0],o=i[1];return Object(r.useEffect)((function(){if(n||!s){a(!0);var t=!0;return h().then((function(n){if(t){if(e&&!n)return void(window.location.href=\"/api/login\");o(n),a(!1)}})),function(){t=!1}}}),[]),{user:s,loading:n}}();return c(e,Object(s.a)({},t,{useFetchUser:n}))}}},fdRS:function(e,t,n){\"use strict\";n.r(t);var a=n(\"vJKn\"),i=n.n(a),s=n(\"rg98\"),o=n(\"H+61\"),r=n(\"UlJF\"),c=n(\"+Css\"),h=n(\"7LId\"),u=n(\"VIvw\"),l=n(\"iHvq\"),p=n(\"cpVT\"),m=n(\"q1tI\"),d=n.n(m),g=n(\"oKQX\"),_=n(\"26zG\"),f=n(\"WuuX\"),y=d.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var k=function(e){Object(h.a)(n,e);var t=v(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={firstName:\"Jane\",lastName:\"Doe\",email:\"janedoe@email.com\",shippingName:\"Jane Doe\",shippingStreet:\"123 Fake St\",shippingCity:\"London\",shippingStateProvince:\"\",shippingPostalZipCode:\"\",shippingCountry:\"\",cardNum:\"4242 4242 4242 4242\",expMonth:\"11\",expYear:\"2023\",ccv:\"123\",billingPostalZipcode:\"SM4 4ED\",shippingCountries:{},shippingSubdivisions:{},shippingOptions:[],shippingOption:\"\"},a.handleFormChanges=a.handleFormChanges.bind(Object(c.a)(a)),a.handleShippingCountryChange=a.handleShippingCountryChange.bind(Object(c.a)(a)),a.handleSubdivisionChange=a.handleSubdivisionChange.bind(Object(c.a)(a)),a.handleCaptureCheckout=a.handleCaptureCheckout.bind(Object(c.a)(a)),a}return Object(r.a)(n,[{key:\"componentDidMount\",value:function(){this.context.generateCheckoutToken()}},{key:\"fetchCart\",value:function(){this.context.fetchCart()}},{key:\"componentDidUpdate\",value:function(e,t){this.state.shippingCountry!==t.shippingCountry&&this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry)}},{key:\"fetchShippingCountries\",value:function(e){var t=this;g.a.services.localeListShippingCountries(e).then((function(e){t.setState({shippingCountries:e.countries})})).catch((function(e){console.log(\"There was an error fetching a list of shipping countries\",e)}))}},{key:\"fetchSubdivisions\",value:function(e){var t=this;g.a.services.localeListSubdivisions(e).then((function(e){t.setState({shippingSubdivisions:e.subdivisions})})).catch((function(e){console.log(\"There was an error fetching the subdivisions\",e)}))}},{key:\"fetchShippingOptions\",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;g.a.checkout.getShippingOptions(e,{country:t,region:a}).then((function(e){var t=e[0]||null;n.setState({shippingOption:t,shippingOptions:e})})).catch((function(e){console.log(\"There was an error fetching the shipping methods\",e)}))}},{key:\"handleFormChanges\",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:\"handleShippingCountryChange\",value:function(e){var t=e.target.value;this.fetchSubdivisions(t)}},{key:\"handleSubdivisionChange\",value:function(e){var t=e.target.value;this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry,t)}},{key:\"handleCaptureCheckout\",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a,s,o,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.props.useFetchUser,a=n.loading,s=n.user,o=null,a||!s){e.next=16;break}return e.next=6,this.context.getUser(s.sub);case 6:return r=e.sent,e.next=9,this.context.getCommerceCustomer(r.data.app_metadata.commerceID);case 9:if(null!=(o=e.sent)){e.next=16;break}return e.next=13,this.context.createCommerceCustomer(s.email);case 13:return o=e.sent,e.next=16,this.context.updateAuthCustomerCommerceID({id:s.sub,commerceID:o.data.id});case 16:try{c={tokenID:this.context.checkoutToken.id,line_items:this.context.checkoutToken.live.line_items,customer:C(C(C({},o&&{id:o.data.id}),!o&&{email:this.state.email}),{},{firstname:this.state.firstName,lastname:this.state.lastName}),shipping:{name:this.state.shippingName,street:this.state.shippingStreet,town_city:this.state.shippingCity,county_state:this.state.shippingStateProvince,postal_zip_code:this.state.shippingPostalZipCode,country:this.state.shippingCountry},fulfillment:{shipping_method:this.state.shippingOption.id},payment:{gateway:\"test_gateway\",card:{number:this.state.cardNum,expiry_month:this.state.expMonth,expiry_year:this.state.expYear,cvc:this.state.ccv,postal_zip_code:this.state.billingPostalZipcode}}},this.context.handleCaptureCheckout(c)}catch(i){console.log(\"There was an error with the order data\",i)}case 17:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"renderCheckoutForm\",value:function(){var e=this.state,t=e.shippingCountries,n=e.shippingSubdivisions,a=e.shippingOptions;return y(\"form\",{className:\"checkout__form\",onChange:this.handleFormChanges},y(\"h4\",{className:\"checkout__subheading\"},\"Customer information\"),y(\"label\",{className:\"checkout__label\",htmlFor:\"firstName\"},\"First name\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.firstName,name:\"firstName\",placeholder:\"Enter your first name\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"lastName\"},\"Last name\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.lastName,name:\"lastName\",placeholder:\"Enter your last name\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"email\"},\"Email\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.email,name:\"email\",placeholder:\"Enter your email\",required:!0}),y(\"h4\",{className:\"checkout__subheading\"},\"Shipping details\"),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingName\"},\"Full name\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingName,name:\"shippingName\",placeholder:\"Enter your shipping full name\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStreet\"},\"Street address\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingStreet,name:\"shippingStreet\",placeholder:\"Enter your street address\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCity\"},\"City\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingCity,name:\"shippingCity\",placeholder:\"Enter your city\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingPostalZipCode\"},\"Postal/Zip code\"),y(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingPostalZipCode,name:\"shippingPostalZipCode\",placeholder:\"Enter your postal/zip code\",required:!0}),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCountry\"},\"Country\"),y(\"select\",{value:this.state.shippingCountry,name:\"shippingCountry\",onChange:this.handleShippingCountryChange,className:\"checkout__select\"},y(\"option\",{disabled:!0},\"Country\"),Object.keys(t).map((function(e){return y(\"option\",{value:e,key:e},t[e])})),\";\"),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStateProvince\"},\"State/province\"),y(\"select\",{value:this.state.shippingStateProvince,name:\"shippingStateProvince\",onChange:this.handleSubdivisionChange,className:\"checkout__select\"},y(\"option\",{className:\"checkout__option\",disabled:!0},\"State/province\"),Object.keys(n).map((function(e){return y(\"option\",{value:e,key:e},n[e])})),\";\"),y(\"label\",{className:\"checkout__label\",htmlFor:\"shippingOption\"},\"Shipping method\"),y(\"select\",{value:this.state.shippingOption.id,name:\"shippingOption\",onChange:this.handleFormChanges,className:\"checkout__select\"},y(\"option\",{className:\"checkout__select-option\",disabled:!0},\"Select a shipping method\"),a.map((function(e,t){return y(\"option\",{className:\"checkout__select-option\",value:e.id,key:t},\"\".concat(e.description,\" - $\").concat(e.price.formatted_with_code))})),\";\"),y(\"h4\",{className:\"checkout__subheading\"},\"Payment information\"),y(\"label\",{className:\"checkout__label\",htmlFor:\"cardNum\"},\"Credit card number\"),y(\"input\",{className:\"checkout__input\",type:\"text\",name:\"cardNum\",onChange:this.handleFormChanges,value:this.state.cardNum,placeholder:\"Enter your card number\"}),y(\"label\",{className:\"checkout__label\",htmlFor:\"expMonth\"},\"Expiry month\"),y(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expMonth\",onChange:this.handleFormChanges,value:this.state.expMonth,placeholder:\"Card expiry month\"}),y(\"label\",{className:\"checkout__label\",htmlFor:\"expYear\"},\"Expiry year\"),y(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expYear\",onChange:this.handleFormChanges,value:this.state.expYear,placeholder:\"Card expiry year\"}),y(\"label\",{className:\"checkout__label\",htmlFor:\"ccv\"},\"CCV\"),y(\"input\",{className:\"checkout__input\",type:\"text\",name:\"ccv\",onChange:this.handleFormChanges,value:this.state.ccv,placeholder:\"CCV (3 digits)\"}),y(\"button\",{onClick:this.handleCaptureCheckout,className:\"checkout__btn-confirm\"},\"Confirm order\"))}},{key:\"renderCheckoutSummary\",value:function(){var e=this.context.cart;if(Object.keys(e).length>0)return y(d.a.Fragment,null,y(\"div\",{className:\"checkout__summary\"},y(\"h4\",null,\"Order summary\"),e.line_items.map((function(e){return y(d.a.Fragment,null,y(\"div\",{key:e.id,className:\"checkout__summary-details\"},y(\"img\",{className:\"checkout__summary-img\",src:e.media.source,alt:e.name}),y(\"p\",{className:\"checkout__summary-name\"},e.quantity,\" x \",e.name),y(\"p\",{className:\"checkout__summary-value\"},e.line_total.formatted_with_symbol)))})),y(\"div\",{className:\"checkout__summary-total\"},y(\"p\",{className:\"checkout__summary-price\"},y(\"span\",null,\"Subtotal:\"),e.subtotal.formatted_with_symbol))))}},{key:\"render\",value:function(){return y(\"div\",{className:\"checkout\"},y(\"h2\",{className:\"checkout__heading\"},\"Checkout\"),y(\"div\",{className:\"checkout__wrapper\"},this.renderCheckoutForm(),this.renderCheckoutSummary()))}}]),n}(m.Component);Object(p.a)(k,\"contextType\",_.a),t.default=Object(f.a)(k)}},[[\"QCli\",0,1,2,3,5]]]);","map":{"version":3,"sources":["static/chunks/pages/checkout-033b3fd5d5012705a319.js"],"names":["_N_E","window","push","QCli","module","exports","__webpack_require__","__NEXT_P","WuuX","__webpack_exports__","d","withUseFetchUser","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","__jsx","a","createElement","fetchUser","_fetchUser","apply","this","arguments","Object","mark","_callee","cookie","res","json","_args","wrap","_context","prev","next","length","undefined","__user","abrupt","fetch","headers","sent","ok","stop","Component","props","myHookValue","required","_useState","loading","setLoading","_useState2","user","setUser","isMounted","then","location","href","useFetchUser","fdRS","r","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__","react__WEBPACK_IMPORTED_MODULE_9__","react__WEBPACK_IMPORTED_MODULE_9___default","_lib_commerce__WEBPACK_IMPORTED_MODULE_10__","_context_state__WEBPACK_IMPORTED_MODULE_11__","_lib_user__WEBPACK_IMPORTED_MODULE_12__","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","i","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","constructor","Checkout","_Component","_super","_this","state","firstName","lastName","email","shippingName","shippingStreet","shippingCity","shippingStateProvince","shippingPostalZipCode","shippingCountry","cardNum","expMonth","expYear","ccv","billingPostalZipcode","shippingCountries","shippingSubdivisions","shippingOptions","shippingOption","handleFormChanges","bind","handleShippingCountryChange","handleSubdivisionChange","handleCaptureCheckout","value","context","generateCheckoutToken","fetchCart","prevProps","prevState","fetchShippingOptions","checkoutToken","id","checkoutTokenId","_this2","services","localeListShippingCountries","countries","setState","catch","error","console","log","countryCode","_this3","localeListSubdivisions","subdivisions","country","_this4","stateProvince","checkout","getShippingOptions","region","options","name","currentValue","fetchSubdivisions","_handleCaptureCheckout","_this$props$useFetchU","commerceCustomer","auth0User","orderData","preventDefault","getUser","sub","getCommerceCustomer","data","app_metadata","commerceID","createCommerceCustomer","updateAuthCustomerCommerceID","tokenID","line_items","live","customer","firstname","lastname","shipping","street","town_city","county_state","postal_zip_code","fulfillment","shipping_method","payment","gateway","card","number","expiry_month","expiry_year","cvc","_x","_this$state","className","onChange","htmlFor","type","placeholder","disabled","map","index","method","concat","description","price","formatted_with_code","onClick","cart","Fragment","lineItem","src","media","alt","quantity","line_total","formatted_with_symbol","subtotal","renderCheckoutForm","renderCheckoutSummary"],"mappings":"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"},"name":"static/chunks/pages/checkout-033b3fd5d5012705a319.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[14],{\n\n/***/ \"QCli\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/checkout\",\n      function () {\n        return __webpack_require__(\"fdRS\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"WuuX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export fetchUser */\n/* unused harmony export useFetchUser */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return withUseFetchUser; });\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HALo\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement;\n\nfunction fetchUser() {\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction _fetchUser() {\n  _fetchUser = Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n    var cookie,\n        res,\n        json,\n        _args = arguments;\n    return C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookie = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n            if (!( true && window.__user)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", window.__user);\n\n          case 3:\n            _context.next = 5;\n            return fetch('/api/auth/me', cookie ? {\n              headers: {\n                cookie: cookie\n              }\n            } : {});\n\n          case 5:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 9;\n              break;\n            }\n\n            delete window.__user;\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            _context.next = 11;\n            return res.json();\n\n          case 11:\n            json = _context.sent;\n\n            if (true) {\n              window.__user = json;\n            }\n\n            return _context.abrupt(\"return\", json);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction useFetchUser() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      required = _ref.required;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(function () {\n    return !( true && window.__user);\n  }),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(function () {\n    if (false) {}\n\n    return window.__user || null;\n  }),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    setLoading(true);\n    var isMounted = true;\n    fetchUser().then(function (user) {\n      // Only set the user if the component is still mounted\n      if (isMounted) {\n        // When the user is not logged in but login is required\n        if (required && !user) {\n          window.location.href = '/api/login';\n          return;\n        }\n\n        setUser(user);\n        setLoading(false);\n      }\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\nfunction withUseFetchUser(Component) {\n  return function WrappedComponent(props) {\n    var myHookValue = useFetchUser();\n    return __jsx(Component, Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])({}, props, {\n      useFetchUser: myHookValue\n    }));\n  };\n}\n\n/***/ }),\n\n/***/ \"fdRS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"rg98\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"H+61\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"UlJF\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"+Css\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"7LId\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"VIvw\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"iHvq\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _lib_commerce__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"oKQX\");\n/* harmony import */ var _context_state__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"26zG\");\n/* harmony import */ var _lib_user__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"WuuX\");\n\n\n\n\n\n\n\n\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n\n\n\n\n\nvar Checkout = /*#__PURE__*/function (_Component) {\n  Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(Checkout, _Component);\n\n  var _super = _createSuper(Checkout);\n\n  function Checkout(props) {\n    var _this;\n\n    Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, Checkout);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      // Customer details\n      firstName: 'Jane',\n      lastName: 'Doe',\n      email: 'janedoe@email.com',\n      // Shipping details\n      shippingName: 'Jane Doe',\n      shippingStreet: '123 Fake St',\n      shippingCity: 'London',\n      shippingStateProvince: '',\n      shippingPostalZipCode: '',\n      shippingCountry: '',\n      // Payment details\n      cardNum: '4242 4242 4242 4242',\n      expMonth: '11',\n      expYear: '2023',\n      ccv: '123',\n      billingPostalZipcode: 'SM4 4ED',\n      // Shipping and fulfillment data\n      shippingCountries: {},\n      shippingSubdivisions: {},\n      shippingOptions: [],\n      shippingOption: ''\n    };\n    _this.handleFormChanges = _this.handleFormChanges.bind(Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this));\n    _this.handleShippingCountryChange = _this.handleShippingCountryChange.bind(Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this));\n    _this.handleSubdivisionChange = _this.handleSubdivisionChange.bind(Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this));\n    _this.handleCaptureCheckout = _this.handleCaptureCheckout.bind(Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this));\n    return _this;\n  }\n\n  Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(Checkout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.context.generateCheckoutToken();\n    }\n  }, {\n    key: \"fetchCart\",\n    value: function fetchCart() {\n      this.context.fetchCart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.state.shippingCountry !== prevState.shippingCountry) {\n        this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry);\n      }\n    }\n  }, {\n    key: \"fetchShippingCountries\",\n\n    /**\r\n     * Fetches a list of countries available to ship to checkout token\r\n     * https://commercejs.com/docs/sdk/checkout#list-available-shipping-countries\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     */\n    value: function fetchShippingCountries(checkoutTokenId) {\n      var _this2 = this;\n\n      _lib_commerce__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].services.localeListShippingCountries(checkoutTokenId).then(function (countries) {\n        _this2.setState({\n          shippingCountries: countries.countries\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching a list of shipping countries', error);\n      });\n    }\n  }, {\n    key: \"fetchSubdivisions\",\n\n    /**\r\n     * Fetches the subdivisions (provinces/states) for a country\r\n     * https://commercejs.com/docs/sdk/checkout#list-all-subdivisions-for-a-country\r\n     *\r\n     * @param {string} countryCode\r\n     */\n    value: function fetchSubdivisions(countryCode) {\n      var _this3 = this;\n\n      _lib_commerce__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].services.localeListSubdivisions(countryCode).then(function (subdivisions) {\n        _this3.setState({\n          shippingSubdivisions: subdivisions.subdivisions\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching the subdivisions', error);\n      });\n    }\n  }, {\n    key: \"fetchShippingOptions\",\n\n    /**\r\n     * Fetches the available shipping methods for the current checkout\r\n     * https://commercejs.com/docs/sdk/checkout#get-shipping-methods\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     * @param {string} country\r\n     * @param {string} stateProvince\r\n     */\n    value: function fetchShippingOptions(checkoutTokenId, country) {\n      var _this4 = this;\n\n      var stateProvince = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      _lib_commerce__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].checkout.getShippingOptions(checkoutTokenId, {\n        country: country,\n        region: stateProvince\n      }).then(function (options) {\n        // Pre-select the first available method\n        var shippingOption = options[0] || null;\n\n        _this4.setState({\n          shippingOption: shippingOption,\n          shippingOptions: options\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching the shipping methods', error);\n      });\n    }\n  }, {\n    key: \"handleFormChanges\",\n    value: function handleFormChanges(e) {\n      this.setState(Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleShippingCountryChange\",\n    value: function handleShippingCountryChange(e) {\n      var currentValue = e.target.value;\n      this.fetchSubdivisions(currentValue);\n    }\n  }, {\n    key: \"handleSubdivisionChange\",\n    value: function handleSubdivisionChange(e) {\n      var currentValue = e.target.value;\n      this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry, currentValue);\n    }\n  }, {\n    key: \"handleCaptureCheckout\",\n    value: function () {\n      var _handleCaptureCheckout = Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e) {\n        var _this$props$useFetchU, loading, user, commerceCustomer, auth0User, orderData;\n\n        return C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$props$useFetchU = this.props.useFetchUser, loading = _this$props$useFetchU.loading, user = _this$props$useFetchU.user;\n                commerceCustomer = null;\n\n                if (!(!loading && user)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.context.getUser(user.sub);\n\n              case 6:\n                auth0User = _context.sent;\n                _context.next = 9;\n                return this.context.getCommerceCustomer(auth0User.data.app_metadata.commerceID);\n\n              case 9:\n                commerceCustomer = _context.sent;\n\n                if (!(commerceCustomer == null)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 13;\n                return this.context.createCommerceCustomer(user.email);\n\n              case 13:\n                commerceCustomer = _context.sent;\n                _context.next = 16;\n                return this.context.updateAuthCustomerCommerceID({\n                  id: user.sub,\n                  commerceID: commerceCustomer.data.id\n                });\n\n              case 16:\n                try {\n                  orderData = {\n                    tokenID: this.context.checkoutToken.id,\n                    line_items: this.context.checkoutToken.live.line_items,\n                    customer: _objectSpread(_objectSpread(_objectSpread({}, commerceCustomer && {\n                      id: commerceCustomer.data.id\n                    }), !commerceCustomer && {\n                      email: this.state.email\n                    }), {}, {\n                      firstname: this.state.firstName,\n                      lastname: this.state.lastName\n                    }),\n                    shipping: {\n                      name: this.state.shippingName,\n                      street: this.state.shippingStreet,\n                      town_city: this.state.shippingCity,\n                      county_state: this.state.shippingStateProvince,\n                      postal_zip_code: this.state.shippingPostalZipCode,\n                      country: this.state.shippingCountry\n                    },\n                    fulfillment: {\n                      shipping_method: this.state.shippingOption.id\n                    },\n                    payment: {\n                      gateway: \"test_gateway\",\n                      card: {\n                        number: this.state.cardNum,\n                        expiry_month: this.state.expMonth,\n                        expiry_year: this.state.expYear,\n                        cvc: this.state.ccv,\n                        postal_zip_code: this.state.billingPostalZipcode\n                      }\n                    }\n                  };\n                  this.context.handleCaptureCheckout(orderData);\n                } catch (error) {\n                  console.log(\"There was an error with the order data\", error);\n                }\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleCaptureCheckout(_x) {\n        return _handleCaptureCheckout.apply(this, arguments);\n      }\n\n      return handleCaptureCheckout;\n    }()\n  }, {\n    key: \"renderCheckoutForm\",\n    value: function renderCheckoutForm() {\n      var _this$state = this.state,\n          shippingCountries = _this$state.shippingCountries,\n          shippingSubdivisions = _this$state.shippingSubdivisions,\n          shippingOptions = _this$state.shippingOptions;\n      return __jsx(\"form\", {\n        className: \"checkout__form\",\n        onChange: this.handleFormChanges\n      }, __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Customer information\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"firstName\"\n      }, \"First name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.firstName,\n        name: \"firstName\",\n        placeholder: \"Enter your first name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"lastName\"\n      }, \"Last name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.lastName,\n        name: \"lastName\",\n        placeholder: \"Enter your last name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"email\"\n      }, \"Email\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.email,\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        required: true\n      }), __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Shipping details\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingName\"\n      }, \"Full name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingName,\n        name: \"shippingName\",\n        placeholder: \"Enter your shipping full name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStreet\"\n      }, \"Street address\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingStreet,\n        name: \"shippingStreet\",\n        placeholder: \"Enter your street address\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCity\"\n      }, \"City\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingCity,\n        name: \"shippingCity\",\n        placeholder: \"Enter your city\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingPostalZipCode\"\n      }, \"Postal/Zip code\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingPostalZipCode,\n        name: \"shippingPostalZipCode\",\n        placeholder: \"Enter your postal/zip code\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCountry\"\n      }, \"Country\"), __jsx(\"select\", {\n        value: this.state.shippingCountry,\n        name: \"shippingCountry\",\n        onChange: this.handleShippingCountryChange,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        disabled: true\n      }, \"Country\"), Object.keys(shippingCountries).map(function (index) {\n        return __jsx(\"option\", {\n          value: index,\n          key: index\n        }, shippingCountries[index]);\n      }), \";\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStateProvince\"\n      }, \"State/province\"), __jsx(\"select\", {\n        value: this.state.shippingStateProvince,\n        name: \"shippingStateProvince\",\n        onChange: this.handleSubdivisionChange,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        className: \"checkout__option\",\n        disabled: true\n      }, \"State/province\"), Object.keys(shippingSubdivisions).map(function (index) {\n        return __jsx(\"option\", {\n          value: index,\n          key: index\n        }, shippingSubdivisions[index]);\n      }), \";\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingOption\"\n      }, \"Shipping method\"), __jsx(\"select\", {\n        value: this.state.shippingOption.id,\n        name: \"shippingOption\",\n        onChange: this.handleFormChanges,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        className: \"checkout__select-option\",\n        disabled: true\n      }, \"Select a shipping method\"), shippingOptions.map(function (method, index) {\n        return __jsx(\"option\", {\n          className: \"checkout__select-option\",\n          value: method.id,\n          key: index\n        }, \"\".concat(method.description, \" - $\").concat(method.price.formatted_with_code));\n      }), \";\"), __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Payment information\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"cardNum\"\n      }, \"Credit card number\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"cardNum\",\n        onChange: this.handleFormChanges,\n        value: this.state.cardNum,\n        placeholder: \"Enter your card number\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expMonth\"\n      }, \"Expiry month\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expMonth\",\n        onChange: this.handleFormChanges,\n        value: this.state.expMonth,\n        placeholder: \"Card expiry month\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expYear\"\n      }, \"Expiry year\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expYear\",\n        onChange: this.handleFormChanges,\n        value: this.state.expYear,\n        placeholder: \"Card expiry year\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"ccv\"\n      }, \"CCV\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"ccv\",\n        onChange: this.handleFormChanges,\n        value: this.state.ccv,\n        placeholder: \"CCV (3 digits)\"\n      }), __jsx(\"button\", {\n        onClick: this.handleCaptureCheckout,\n        className: \"checkout__btn-confirm\"\n      }, \"Confirm order\"));\n    }\n  }, {\n    key: \"renderCheckoutSummary\",\n    value: function renderCheckoutSummary() {\n      var cart = this.context.cart;\n\n      if (Object.keys(cart).length > 0) {\n        return __jsx(react__WEBPACK_IMPORTED_MODULE_9___default.a.Fragment, null, __jsx(\"div\", {\n          className: \"checkout__summary\"\n        }, __jsx(\"h4\", null, \"Order summary\"), cart.line_items.map(function (lineItem) {\n          return __jsx(react__WEBPACK_IMPORTED_MODULE_9___default.a.Fragment, null, __jsx(\"div\", {\n            key: lineItem.id,\n            className: \"checkout__summary-details\"\n          }, __jsx(\"img\", {\n            className: \"checkout__summary-img\",\n            src: lineItem.media.source,\n            alt: lineItem.name\n          }), __jsx(\"p\", {\n            className: \"checkout__summary-name\"\n          }, lineItem.quantity, \" x \", lineItem.name), __jsx(\"p\", {\n            className: \"checkout__summary-value\"\n          }, lineItem.line_total.formatted_with_symbol)));\n        }), __jsx(\"div\", {\n          className: \"checkout__summary-total\"\n        }, __jsx(\"p\", {\n          className: \"checkout__summary-price\"\n        }, __jsx(\"span\", null, \"Subtotal:\"), cart.subtotal.formatted_with_symbol))));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"checkout\"\n      }, __jsx(\"h2\", {\n        className: \"checkout__heading\"\n      }, \"Checkout\"), __jsx(\"div\", {\n        className: \"checkout__wrapper\"\n      }, this.renderCheckoutForm(), this.renderCheckoutSummary()));\n    }\n  }]);\n\n  return Checkout;\n}(react__WEBPACK_IMPORTED_MODULE_9__[\"Component\"]);\n\nObject(C_Users_KGM_OneDrive_Documents_GitHub_chec_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(Checkout, \"contextType\", _context_state__WEBPACK_IMPORTED_MODULE_11__[/* AppContext */ \"a\"]);\n\n;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(_lib_user__WEBPACK_IMPORTED_MODULE_12__[/* withUseFetchUser */ \"a\"])(Checkout));\n\n/***/ })\n\n},[[\"QCli\",0,1,2,3,5]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fcheckout&absolutePagePath=private-next-pages%2Fcheckout.js!","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\lib\\user.js","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\pages\\checkout.js"],"names":[],"mappings":"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ACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mCAAmC,4KAAiB,eAAe,0IAAmB;AACtF;;AAEA,eAAe,0IAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA,qBAAqB;AACrB;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO,KAAK;AACZ;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO,KAAK;AACZ;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,KAAK;AACZ;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,qBAAqB,4CAAK;AAC1B;AACA,SAAS;AACT,uBAAuB,4CAAK;AAC5B;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,CAAC,CAAC,+CAAS;;AAEX,0KAAe,0BAA0B,kEAAU;;AAEnD;AACe,0IAAgB,UAAU,E","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/checkout\",\n      function () {\n        return require(\"private-next-pages/checkout.js\");\n      }\n    ]);\n  ","import _regeneratorRuntime from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _extends from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _asyncToGenerator from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nexport function fetchUser() {\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction _fetchUser() {\n  _fetchUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var cookie,\n        res,\n        json,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookie = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n            if (!(true && window.__user)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", window.__user);\n\n          case 3:\n            _context.next = 5;\n            return fetch('/api/auth/me', cookie ? {\n              headers: {\n                cookie: cookie\n              }\n            } : {});\n\n          case 5:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 9;\n              break;\n            }\n\n            delete window.__user;\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            _context.next = 11;\n            return res.json();\n\n          case 11:\n            json = _context.sent;\n\n            if (true) {\n              window.__user = json;\n            }\n\n            return _context.abrupt(\"return\", json);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchUser.apply(this, arguments);\n}\n\nexport function useFetchUser() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      required = _ref.required;\n\n  var _useState = useState(function () {\n    return !(true && window.__user);\n  }),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(function () {\n    if (false) {\n      return null;\n    }\n\n    return window.__user || null;\n  }),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  useEffect(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    setLoading(true);\n    var isMounted = true;\n    fetchUser().then(function (user) {\n      // Only set the user if the component is still mounted\n      if (isMounted) {\n        // When the user is not logged in but login is required\n        if (required && !user) {\n          window.location.href = '/api/login';\n          return;\n        }\n\n        setUser(user);\n        setLoading(false);\n      }\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\nexport function withUseFetchUser(Component) {\n  return function WrappedComponent(props) {\n    var myHookValue = useFetchUser();\n    return __jsx(Component, _extends({}, props, {\n      useFetchUser: myHookValue\n    }));\n  };\n}","import _regeneratorRuntime from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport commerce from '../lib/commerce';\nimport { AppContext } from '../context/state';\nimport { withUseFetchUser } from '../lib/user';\n\nvar Checkout = /*#__PURE__*/function (_Component) {\n  _inherits(Checkout, _Component);\n\n  var _super = _createSuper(Checkout);\n\n  function Checkout(props) {\n    var _this;\n\n    _classCallCheck(this, Checkout);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      // Customer details\n      firstName: 'Jane',\n      lastName: 'Doe',\n      email: 'janedoe@email.com',\n      // Shipping details\n      shippingName: 'Jane Doe',\n      shippingStreet: '123 Fake St',\n      shippingCity: 'London',\n      shippingStateProvince: '',\n      shippingPostalZipCode: '',\n      shippingCountry: '',\n      // Payment details\n      cardNum: '4242 4242 4242 4242',\n      expMonth: '11',\n      expYear: '2023',\n      ccv: '123',\n      billingPostalZipcode: 'SM4 4ED',\n      // Shipping and fulfillment data\n      shippingCountries: {},\n      shippingSubdivisions: {},\n      shippingOptions: [],\n      shippingOption: ''\n    };\n    _this.handleFormChanges = _this.handleFormChanges.bind(_assertThisInitialized(_this));\n    _this.handleShippingCountryChange = _this.handleShippingCountryChange.bind(_assertThisInitialized(_this));\n    _this.handleSubdivisionChange = _this.handleSubdivisionChange.bind(_assertThisInitialized(_this));\n    _this.handleCaptureCheckout = _this.handleCaptureCheckout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Checkout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.context.generateCheckoutToken();\n    }\n  }, {\n    key: \"fetchCart\",\n    value: function fetchCart() {\n      this.context.fetchCart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.state.shippingCountry !== prevState.shippingCountry) {\n        this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry);\n      }\n    }\n  }, {\n    key: \"fetchShippingCountries\",\n\n    /**\r\n     * Fetches a list of countries available to ship to checkout token\r\n     * https://commercejs.com/docs/sdk/checkout#list-available-shipping-countries\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     */\n    value: function fetchShippingCountries(checkoutTokenId) {\n      var _this2 = this;\n\n      commerce.services.localeListShippingCountries(checkoutTokenId).then(function (countries) {\n        _this2.setState({\n          shippingCountries: countries.countries\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching a list of shipping countries', error);\n      });\n    }\n  }, {\n    key: \"fetchSubdivisions\",\n\n    /**\r\n     * Fetches the subdivisions (provinces/states) for a country\r\n     * https://commercejs.com/docs/sdk/checkout#list-all-subdivisions-for-a-country\r\n     *\r\n     * @param {string} countryCode\r\n     */\n    value: function fetchSubdivisions(countryCode) {\n      var _this3 = this;\n\n      commerce.services.localeListSubdivisions(countryCode).then(function (subdivisions) {\n        _this3.setState({\n          shippingSubdivisions: subdivisions.subdivisions\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching the subdivisions', error);\n      });\n    }\n  }, {\n    key: \"fetchShippingOptions\",\n\n    /**\r\n     * Fetches the available shipping methods for the current checkout\r\n     * https://commercejs.com/docs/sdk/checkout#get-shipping-methods\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     * @param {string} country\r\n     * @param {string} stateProvince\r\n     */\n    value: function fetchShippingOptions(checkoutTokenId, country) {\n      var _this4 = this;\n\n      var stateProvince = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      commerce.checkout.getShippingOptions(checkoutTokenId, {\n        country: country,\n        region: stateProvince\n      }).then(function (options) {\n        // Pre-select the first available method\n        var shippingOption = options[0] || null;\n\n        _this4.setState({\n          shippingOption: shippingOption,\n          shippingOptions: options\n        });\n      }).catch(function (error) {\n        console.log('There was an error fetching the shipping methods', error);\n      });\n    }\n  }, {\n    key: \"handleFormChanges\",\n    value: function handleFormChanges(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleShippingCountryChange\",\n    value: function handleShippingCountryChange(e) {\n      var currentValue = e.target.value;\n      this.fetchSubdivisions(currentValue);\n    }\n  }, {\n    key: \"handleSubdivisionChange\",\n    value: function handleSubdivisionChange(e) {\n      var currentValue = e.target.value;\n      this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry, currentValue);\n    }\n  }, {\n    key: \"handleCaptureCheckout\",\n    value: function () {\n      var _handleCaptureCheckout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _this$props$useFetchU, loading, user, commerceCustomer, auth0User, orderData;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$props$useFetchU = this.props.useFetchUser, loading = _this$props$useFetchU.loading, user = _this$props$useFetchU.user;\n                commerceCustomer = null;\n\n                if (!(!loading && user)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.context.getUser(user.sub);\n\n              case 6:\n                auth0User = _context.sent;\n                _context.next = 9;\n                return this.context.getCommerceCustomer(auth0User.data.app_metadata.commerceID);\n\n              case 9:\n                commerceCustomer = _context.sent;\n\n                if (!(commerceCustomer == null)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 13;\n                return this.context.createCommerceCustomer(user.email);\n\n              case 13:\n                commerceCustomer = _context.sent;\n                _context.next = 16;\n                return this.context.updateAuthCustomerCommerceID({\n                  id: user.sub,\n                  commerceID: commerceCustomer.data.id\n                });\n\n              case 16:\n                try {\n                  orderData = {\n                    tokenID: this.context.checkoutToken.id,\n                    line_items: this.context.checkoutToken.live.line_items,\n                    customer: _objectSpread(_objectSpread(_objectSpread({}, commerceCustomer && {\n                      id: commerceCustomer.data.id\n                    }), !commerceCustomer && {\n                      email: this.state.email\n                    }), {}, {\n                      firstname: this.state.firstName,\n                      lastname: this.state.lastName\n                    }),\n                    shipping: {\n                      name: this.state.shippingName,\n                      street: this.state.shippingStreet,\n                      town_city: this.state.shippingCity,\n                      county_state: this.state.shippingStateProvince,\n                      postal_zip_code: this.state.shippingPostalZipCode,\n                      country: this.state.shippingCountry\n                    },\n                    fulfillment: {\n                      shipping_method: this.state.shippingOption.id\n                    },\n                    payment: {\n                      gateway: \"test_gateway\",\n                      card: {\n                        number: this.state.cardNum,\n                        expiry_month: this.state.expMonth,\n                        expiry_year: this.state.expYear,\n                        cvc: this.state.ccv,\n                        postal_zip_code: this.state.billingPostalZipcode\n                      }\n                    }\n                  };\n                  this.context.handleCaptureCheckout(orderData);\n                } catch (error) {\n                  console.log(\"There was an error with the order data\", error);\n                }\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleCaptureCheckout(_x) {\n        return _handleCaptureCheckout.apply(this, arguments);\n      }\n\n      return handleCaptureCheckout;\n    }()\n  }, {\n    key: \"renderCheckoutForm\",\n    value: function renderCheckoutForm() {\n      var _this$state = this.state,\n          shippingCountries = _this$state.shippingCountries,\n          shippingSubdivisions = _this$state.shippingSubdivisions,\n          shippingOptions = _this$state.shippingOptions;\n      return __jsx(\"form\", {\n        className: \"checkout__form\",\n        onChange: this.handleFormChanges\n      }, __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Customer information\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"firstName\"\n      }, \"First name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.firstName,\n        name: \"firstName\",\n        placeholder: \"Enter your first name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"lastName\"\n      }, \"Last name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.lastName,\n        name: \"lastName\",\n        placeholder: \"Enter your last name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"email\"\n      }, \"Email\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.email,\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        required: true\n      }), __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Shipping details\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingName\"\n      }, \"Full name\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingName,\n        name: \"shippingName\",\n        placeholder: \"Enter your shipping full name\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStreet\"\n      }, \"Street address\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingStreet,\n        name: \"shippingStreet\",\n        placeholder: \"Enter your street address\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCity\"\n      }, \"City\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingCity,\n        name: \"shippingCity\",\n        placeholder: \"Enter your city\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingPostalZipCode\"\n      }, \"Postal/Zip code\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingPostalZipCode,\n        name: \"shippingPostalZipCode\",\n        placeholder: \"Enter your postal/zip code\",\n        required: true\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCountry\"\n      }, \"Country\"), __jsx(\"select\", {\n        value: this.state.shippingCountry,\n        name: \"shippingCountry\",\n        onChange: this.handleShippingCountryChange,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        disabled: true\n      }, \"Country\"), Object.keys(shippingCountries).map(function (index) {\n        return __jsx(\"option\", {\n          value: index,\n          key: index\n        }, shippingCountries[index]);\n      }), \";\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStateProvince\"\n      }, \"State/province\"), __jsx(\"select\", {\n        value: this.state.shippingStateProvince,\n        name: \"shippingStateProvince\",\n        onChange: this.handleSubdivisionChange,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        className: \"checkout__option\",\n        disabled: true\n      }, \"State/province\"), Object.keys(shippingSubdivisions).map(function (index) {\n        return __jsx(\"option\", {\n          value: index,\n          key: index\n        }, shippingSubdivisions[index]);\n      }), \";\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingOption\"\n      }, \"Shipping method\"), __jsx(\"select\", {\n        value: this.state.shippingOption.id,\n        name: \"shippingOption\",\n        onChange: this.handleFormChanges,\n        className: \"checkout__select\"\n      }, __jsx(\"option\", {\n        className: \"checkout__select-option\",\n        disabled: true\n      }, \"Select a shipping method\"), shippingOptions.map(function (method, index) {\n        return __jsx(\"option\", {\n          className: \"checkout__select-option\",\n          value: method.id,\n          key: index\n        }, \"\".concat(method.description, \" - $\").concat(method.price.formatted_with_code));\n      }), \";\"), __jsx(\"h4\", {\n        className: \"checkout__subheading\"\n      }, \"Payment information\"), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"cardNum\"\n      }, \"Credit card number\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"cardNum\",\n        onChange: this.handleFormChanges,\n        value: this.state.cardNum,\n        placeholder: \"Enter your card number\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expMonth\"\n      }, \"Expiry month\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expMonth\",\n        onChange: this.handleFormChanges,\n        value: this.state.expMonth,\n        placeholder: \"Card expiry month\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expYear\"\n      }, \"Expiry year\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expYear\",\n        onChange: this.handleFormChanges,\n        value: this.state.expYear,\n        placeholder: \"Card expiry year\"\n      }), __jsx(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"ccv\"\n      }, \"CCV\"), __jsx(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"ccv\",\n        onChange: this.handleFormChanges,\n        value: this.state.ccv,\n        placeholder: \"CCV (3 digits)\"\n      }), __jsx(\"button\", {\n        onClick: this.handleCaptureCheckout,\n        className: \"checkout__btn-confirm\"\n      }, \"Confirm order\"));\n    }\n  }, {\n    key: \"renderCheckoutSummary\",\n    value: function renderCheckoutSummary() {\n      var cart = this.context.cart;\n\n      if (Object.keys(cart).length > 0) {\n        return __jsx(React.Fragment, null, __jsx(\"div\", {\n          className: \"checkout__summary\"\n        }, __jsx(\"h4\", null, \"Order summary\"), cart.line_items.map(function (lineItem) {\n          return __jsx(React.Fragment, null, __jsx(\"div\", {\n            key: lineItem.id,\n            className: \"checkout__summary-details\"\n          }, __jsx(\"img\", {\n            className: \"checkout__summary-img\",\n            src: lineItem.media.source,\n            alt: lineItem.name\n          }), __jsx(\"p\", {\n            className: \"checkout__summary-name\"\n          }, lineItem.quantity, \" x \", lineItem.name), __jsx(\"p\", {\n            className: \"checkout__summary-value\"\n          }, lineItem.line_total.formatted_with_symbol)));\n        }), __jsx(\"div\", {\n          className: \"checkout__summary-total\"\n        }, __jsx(\"p\", {\n          className: \"checkout__summary-price\"\n        }, __jsx(\"span\", null, \"Subtotal:\"), cart.subtotal.formatted_with_symbol))));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"checkout\"\n      }, __jsx(\"h2\", {\n        className: \"checkout__heading\"\n      }, \"Checkout\"), __jsx(\"div\", {\n        className: \"checkout__wrapper\"\n      }, this.renderCheckoutForm(), this.renderCheckoutSummary()));\n    }\n  }]);\n\n  return Checkout;\n}(Component);\n\n_defineProperty(Checkout, \"contextType\", AppContext);\n\n;\nexport default withUseFetchUser(Checkout);"]}}