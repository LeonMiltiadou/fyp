{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{HALo:function(n,e,r){\"use strict\";function t(){return(t=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}r.d(e,\"a\",(function(){return t}))},\"W+IF\":function(n,e,r){\"use strict\";r.r(e);var t=r(\"q1tI\"),u=r.n(t),i=r(\"WuuX\"),o=u.a.createElement;function a(n){var e=n.user;return o(u.a.Fragment,null,o(\"h1\",null,\"Profile\"),o(\"div\",null,o(\"h3\",null,\"Profile (client rendered)\"),o(\"img\",{src:e.picture,alt:\"user picture\"}),o(\"p\",null,\"nickname: \",e.nickname),o(\"p\",null,\"name: \",e.name)))}e.default=function(){var n=Object(i.a)({required:!0}),e=n.user,r=n.loading;return o(u.a.Fragment,null,r?o(u.a.Fragment,null,\"Loading...\"):o(a,{user:e}))}},WuuX:function(n,e,r){\"use strict\";r.d(e,\"a\",(function(){return l})),r.d(e,\"b\",(function(){return d}));var t=r(\"vJKn\"),u=r.n(t),i=r(\"HALo\"),o=r(\"rg98\"),a=r(\"q1tI\"),c=r.n(a).a.createElement;function s(){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(u.a.mark((function n(){var e,r,t,i=arguments;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:\"\",!window.__user){n.next=3;break}return n.abrupt(\"return\",window.__user);case 3:return n.next=5,fetch(\"/api/auth/me\",e?{headers:{cookie:e}}:{});case 5:if((r=n.sent).ok){n.next=9;break}return delete window.__user,n.abrupt(\"return\",null);case 9:return n.next=11,r.json();case 11:return t=n.sent,window.__user=t,n.abrupt(\"return\",t);case 14:case\"end\":return n.stop()}}),n)})))).apply(this,arguments)}function l(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.required,r=Object(a.useState)((function(){return!window.__user})),t=r[0],u=r[1],i=Object(a.useState)((function(){return window.__user||null})),o=i[0],c=i[1];return Object(a.useEffect)((function(){if(t||!o){u(!0);var n=!0;return s().then((function(r){if(n){if(e&&!r)return void(window.location.href=\"/api/login\");c(r),u(!1)}})),function(){n=!1}}}),[]),{user:o,loading:t}}function d(n){return function(e){var r=l();return c(n,Object(i.a)({},e,{useFetchUser:r}))}}},rg98:function(n,e,r){\"use strict\";function t(n,e,r,t,u,i,o){try{var a=n[i](o),c=a.value}catch(s){return void r(s)}a.done?e(c):Promise.resolve(c).then(t,u)}function u(n){return function(){var e=this,r=arguments;return new Promise((function(u,i){var o=n.apply(e,r);function a(n){t(o,u,i,a,c,\"next\",n)}function c(n){t(o,u,i,a,c,\"throw\",n)}a(void 0)}))}}r.d(e,\"a\",(function(){return u}))},u1GD:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/profile\",function(){return r(\"W+IF\")}])}},[[\"u1GD\",0,1,2]]]);","map":{"version":3,"sources":["static/chunks/pages/profile-f5a090c15dfef09b157e.js"],"names":["_N_E","window","push","HALo","module","__webpack_exports__","__webpack_require__","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","d","W+IF","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_lib_user__WEBPACK_IMPORTED_MODULE_1__","__jsx","a","createElement","ProfileCard","_ref","user","Fragment","src","picture","alt","nickname","name","_useFetchUser","required","loading","WuuX","useFetchUser","withUseFetchUser","C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__","C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","fetchUser","_fetchUser","mark","_callee","cookie","res","json","_args","wrap","_context","prev","next","undefined","__user","abrupt","fetch","headers","sent","ok","stop","_useState","setLoading","_useState2","setUser","isMounted","then","location","href","Component","props","myHookValue","rg98","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","_asyncToGenerator","fn","self","args","err","u1GD","exports","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/profile-f5a090c15dfef09b157e.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[20],{\n\n/***/ \"HALo\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _extends; });\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n/***/ }),\n\n/***/ \"W+IF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"WuuX\");\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\n\n\nfunction ProfileCard(_ref) {\n  var user = _ref.user;\n  return __jsx(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, __jsx(\"h1\", null, \"Profile\"), __jsx(\"div\", null, __jsx(\"h3\", null, \"Profile (client rendered)\"), __jsx(\"img\", {\n    src: user.picture,\n    alt: \"user picture\"\n  }), __jsx(\"p\", null, \"nickname: \", user.nickname), __jsx(\"p\", null, \"name: \", user.name)));\n}\n\nfunction Profile() {\n  var _useFetchUser = Object(_lib_user__WEBPACK_IMPORTED_MODULE_1__[/* useFetchUser */ \"a\"])({\n    required: true\n  }),\n      user = _useFetchUser.user,\n      loading = _useFetchUser.loading;\n\n  return __jsx(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, loading ? __jsx(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, \"Loading...\") : __jsx(ProfileCard, {\n    user: user\n  }));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Profile);\n\n/***/ }),\n\n/***/ \"WuuX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export fetchUser */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useFetchUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return withUseFetchUser; });\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HALo\");\n/* harmony import */ var C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement;\n\nfunction fetchUser() {\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction _fetchUser() {\n  _fetchUser = Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n    var cookie,\n        res,\n        json,\n        _args = arguments;\n    return C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookie = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n            if (!( true && window.__user)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", window.__user);\n\n          case 3:\n            _context.next = 5;\n            return fetch('/api/auth/me', cookie ? {\n              headers: {\n                cookie: cookie\n              }\n            } : {});\n\n          case 5:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 9;\n              break;\n            }\n\n            delete window.__user;\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            _context.next = 11;\n            return res.json();\n\n          case 11:\n            json = _context.sent;\n\n            if (true) {\n              window.__user = json;\n            }\n\n            return _context.abrupt(\"return\", json);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction useFetchUser() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      required = _ref.required;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(function () {\n    return !( true && window.__user);\n  }),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(function () {\n    if (false) {}\n\n    return window.__user || null;\n  }),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    setLoading(true);\n    var isMounted = true;\n    fetchUser().then(function (user) {\n      // Only set the user if the component is still mounted\n      if (isMounted) {\n        // When the user is not logged in but login is required\n        if (required && !user) {\n          window.location.href = '/api/login';\n          return;\n        }\n\n        setUser(user);\n        setLoading(false);\n      }\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\nfunction withUseFetchUser(Component) {\n  return function WrappedComponent(props) {\n    var myHookValue = useFetchUser();\n    return __jsx(Component, Object(C_Users_KGM_OneDrive_Documents_GitHub_chec_fyp_node_modules_next_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])({}, props, {\n      useFetchUser: myHookValue\n    }));\n  };\n}\n\n/***/ }),\n\n/***/ \"rg98\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ }),\n\n/***/ \"u1GD\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/profile\",\n      function () {\n        return __webpack_require__(\"W+IF\");\n      }\n    ]);\n  \n\n/***/ })\n\n},[[\"u1GD\",0,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\node_modules\\next\\node_modules\\@babel\\runtime\\helpers\\esm\\extends.js","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\pages\\profile.js","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\lib\\user.js","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\node_modules\\next\\node_modules\\@babel\\runtime\\helpers\\esm\\asyncToGenerator.js","C:\\Users\\KGM\\OneDrive\\Documents\\GitHub\\chec\\fyp\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fprofile&absolutePagePath=private-next-pages%2Fprofile.js!"],"names":[],"mappings":";;;;;;;AAAA;AAAe;AACf;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,C;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAA0B;AAC1B,YAAY,4CAAK;AAC0B;;AAE3C;AACA;AACA,eAAe,4CAAK;AACpB;AACA;AACA,GAAG;AACH;;AAEA;AACA,sBAAsB,sEAAY;AAClC;AACA,GAAG;AACH;AACA;;AAEA,eAAe,4CAAK,iCAAiC,4CAAK;AAC1D;AACA,GAAG;AACH;;AAEe,sEAAO,E;;;;;;;;ACxBtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4I;AACH;AACkB;AACjI;AAC1B,YAAY,4CAAK;AAC2B;AACrC;AACP;AACA;;AAEA;AACA,eAAe,gLAAiB,eAAe,8IAAmB;AAClE;AACA;AACA;AACA;AACA,WAAW,8IAAmB;AAC9B;AACA;AACA;AACA;;AAEA,kBAAkB,KAAI;AACtB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;;AAElB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEO;AACP,mFAAmF;AACnF;;AAEA,kBAAkB,sDAAQ;AAC1B,aAAa,KAAI;AACjB,GAAG;AACH;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B,eAAe,EAEV;;AAEL;AACA,GAAG;AACH;AACA;;AAEA,EAAE,uDAAS;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,4BAA4B,uKAAQ,GAAG;AACvC;AACA,KAAK;AACL;AACA,C;;;;;;;;AChIA;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;ACjCA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAA+B;AACtD;AACA","file":"x","sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import React from \"react\";\nvar __jsx = React.createElement;\nimport { useFetchUser } from '../lib/user';\n\nfunction ProfileCard(_ref) {\n  var user = _ref.user;\n  return __jsx(React.Fragment, null, __jsx(\"h1\", null, \"Profile\"), __jsx(\"div\", null, __jsx(\"h3\", null, \"Profile (client rendered)\"), __jsx(\"img\", {\n    src: user.picture,\n    alt: \"user picture\"\n  }), __jsx(\"p\", null, \"nickname: \", user.nickname), __jsx(\"p\", null, \"name: \", user.name)));\n}\n\nfunction Profile() {\n  var _useFetchUser = useFetchUser({\n    required: true\n  }),\n      user = _useFetchUser.user,\n      loading = _useFetchUser.loading;\n\n  return __jsx(React.Fragment, null, loading ? __jsx(React.Fragment, null, \"Loading...\") : __jsx(ProfileCard, {\n    user: user\n  }));\n}\n\nexport default Profile;","import _regeneratorRuntime from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _extends from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _asyncToGenerator from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nexport function fetchUser() {\n  return _fetchUser.apply(this, arguments);\n}\n\nfunction _fetchUser() {\n  _fetchUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var cookie,\n        res,\n        json,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookie = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n            if (!(true && window.__user)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", window.__user);\n\n          case 3:\n            _context.next = 5;\n            return fetch('/api/auth/me', cookie ? {\n              headers: {\n                cookie: cookie\n              }\n            } : {});\n\n          case 5:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 9;\n              break;\n            }\n\n            delete window.__user;\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            _context.next = 11;\n            return res.json();\n\n          case 11:\n            json = _context.sent;\n\n            if (true) {\n              window.__user = json;\n            }\n\n            return _context.abrupt(\"return\", json);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchUser.apply(this, arguments);\n}\n\nexport function useFetchUser() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      required = _ref.required;\n\n  var _useState = useState(function () {\n    return !(true && window.__user);\n  }),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(function () {\n    if (false) {\n      return null;\n    }\n\n    return window.__user || null;\n  }),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  useEffect(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    setLoading(true);\n    var isMounted = true;\n    fetchUser().then(function (user) {\n      // Only set the user if the component is still mounted\n      if (isMounted) {\n        // When the user is not logged in but login is required\n        if (required && !user) {\n          window.location.href = '/api/login';\n          return;\n        }\n\n        setUser(user);\n        setLoading(false);\n      }\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\nexport function withUseFetchUser(Component) {\n  return function WrappedComponent(props) {\n    var myHookValue = useFetchUser();\n    return __jsx(Component, _extends({}, props, {\n      useFetchUser: myHookValue\n    }));\n  };\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/profile\",\n      function () {\n        return require(\"private-next-pages/profile.js\");\n      }\n    ]);\n  "]}}