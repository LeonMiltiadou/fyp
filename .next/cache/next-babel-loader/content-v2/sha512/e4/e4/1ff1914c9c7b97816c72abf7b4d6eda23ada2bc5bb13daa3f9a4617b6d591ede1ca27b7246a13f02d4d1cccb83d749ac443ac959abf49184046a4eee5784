{"ast":null,"code":"let axios = require(\"axios\").default;\n\nlet getTokenOptions = {\n  method: 'POST',\n  url: 'https://leonfyp.eu.auth0.com/oauth/token',\n  headers: {\n    'content-type': 'application/json'\n  },\n  data: {\n    grant_type: 'client_credentials',\n    client_id: process.env.AUTH0_CLIENT_ID,\n    client_secret: process.env.AUTH0_CLIENT_SECRET,\n    audience: 'https://leonfyp.eu.auth0.com/api/v2/'\n  }\n};\nexport default async function getUser(req, res) {\n  if (req.method !== 'GET') {\n    res.status(400).send({\n      message: 'Only GET requests allowed'\n    });\n    return;\n  }\n\n  axios.request(getTokenOptions).then(function (response) {\n    axios.request({\n      method: 'GET',\n      url: 'https://leonfyp.eu.auth0.com/api/v2/users/' + req.query.id,\n      headers: {\n        'content-type': \"application/json\",\n        'Authorization': 'Bearer ' + response.data.access_token\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      res.send(response.data);\n    }).catch(function (error) {\n      console.error(error);\n      res.status(error.status || 500).end(error.message);\n    });\n  }).catch(function (error) {\n    console.error(error);\n    res.status(error.status || 500).end(error.message);\n  });\n}","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/api/auth/getuser/[id].js"],"names":["axios","require","default","getTokenOptions","method","url","headers","data","grant_type","client_id","process","env","AUTH0_CLIENT_ID","client_secret","AUTH0_CLIENT_SECRET","audience","getUser","req","res","status","send","message","request","then","response","query","id","access_token","console","log","catch","error","end"],"mappings":"AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA7B;;AAEA,IAAIC,eAAe,GAAG;AACpBC,EAAAA,MAAM,EAAE,MADY;AAEpBC,EAAAA,GAAG,EAAE,0CAFe;AAGpBC,EAAAA,OAAO,EAAE;AAAE,oBAAgB;AAAlB,GAHW;AAIpBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,UAAU,EAAE,oBADR;AAEJC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,eAFnB;AAGJC,IAAAA,aAAa,EAAEH,OAAO,CAACC,GAAR,CAAYG,mBAHvB;AAIJC,IAAAA,QAAQ,EAAE;AAJN;AAJc,CAAtB;AAcA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAID,GAAG,CAACb,MAAJ,KAAe,KAAnB,EAA0B;AACxBc,IAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACA;AACD;;AACDrB,EAAAA,KAAK,CAACsB,OAAN,CAAcnB,eAAd,EAA+BoB,IAA/B,CAAoC,UAAUC,QAAV,EAAoB;AAEtDxB,IAAAA,KAAK,CAACsB,OAAN,CAAc;AACZlB,MAAAA,MAAM,EAAE,KADI;AAEZC,MAAAA,GAAG,EAAE,+CAA+CY,GAAG,CAACQ,KAAJ,CAAUC,EAFlD;AAIZpB,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAYkB,QAAQ,CAACjB,IAAT,CAAcoB;AAFpC;AAJG,KAAd,EAQGJ,IARH,CAQQ,UAAUC,QAAV,EAAoB;AAC1BI,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACjB,IAArB;AACAW,MAAAA,GAAG,CAACE,IAAJ,CAASI,QAAQ,CAACjB,IAAlB;AACD,KAXD,EAWGuB,KAXH,CAWS,UAAUC,KAAV,EAAiB;AACxBH,MAAAA,OAAO,CAACG,KAAR,CAAcA,KAAd;AACAb,MAAAA,GAAG,CAACC,MAAJ,CAAWY,KAAK,CAACZ,MAAN,IAAgB,GAA3B,EAAgCa,GAAhC,CAAoCD,KAAK,CAACV,OAA1C;AACD,KAdD;AAeD,GAjBD,EAiBGS,KAjBH,CAiBS,UAAUC,KAAV,EAAiB;AACxBH,IAAAA,OAAO,CAACG,KAAR,CAAcA,KAAd;AACAb,IAAAA,GAAG,CAACC,MAAJ,CAAWY,KAAK,CAACZ,MAAN,IAAgB,GAA3B,EAAgCa,GAAhC,CAAoCD,KAAK,CAACV,OAA1C;AACD,GApBD;AAsBD","sourcesContent":["let axios = require(\"axios\").default;\r\n\r\nlet getTokenOptions = {\r\n  method: 'POST',\r\n  url: 'https://leonfyp.eu.auth0.com/oauth/token',\r\n  headers: { 'content-type': 'application/json' },\r\n  data: {\r\n    grant_type: 'client_credentials',\r\n    client_id: process.env.AUTH0_CLIENT_ID,\r\n    client_secret: process.env.AUTH0_CLIENT_SECRET,\r\n    audience: 'https://leonfyp.eu.auth0.com/api/v2/'\r\n  }\r\n};\r\n\r\n\r\n\r\nexport default async function getUser(req, res) {\r\n  if (req.method !== 'GET') {\r\n    res.status(400).send({ message: 'Only GET requests allowed' })\r\n    return\r\n  }\r\n  axios.request(getTokenOptions).then(function (response) {\r\n\r\n    axios.request({\r\n      method: 'GET',\r\n      url: 'https://leonfyp.eu.auth0.com/api/v2/users/' + req.query.id\r\n      ,\r\n      headers: {\r\n        'content-type': \"application/json\",\r\n        'Authorization': 'Bearer ' + response.data.access_token\r\n      }\r\n    }).then(function (response) {\r\n      console.log(response.data);\r\n      res.send(response.data);\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n      res.status(error.status || 500).end(error.message);\r\n    });\r\n  }).catch(function (error) {\r\n    console.error(error);\r\n    res.status(error.status || 500).end(error.message);\r\n  });\r\n\r\n}"]},"metadata":{},"sourceType":"module"}