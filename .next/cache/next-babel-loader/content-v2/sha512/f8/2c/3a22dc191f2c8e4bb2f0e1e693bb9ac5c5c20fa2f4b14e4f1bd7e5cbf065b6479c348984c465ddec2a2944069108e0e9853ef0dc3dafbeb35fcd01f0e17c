{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KGM\\\\OneDrive\\\\Documents\\\\GitHub\\\\chec\\\\fyp\\\\pages\\\\tracking.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Component } from 'react';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport ContactUsForm from '../components/ContactUsForm';\nconst PUSHERAUTHMSURL = process.env.PUSHERAUTHMSURL;\nconst PUSHER_APP_KEY = process.env.PUSHER_APP_KEY;\nconst PUSHER_CLUSTER = process.env.PUSHER_CLUSTER;\n\nclass Tracking extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"latitude\": 20,\n      \"longitude\": 20,\n      \"accuracy\": \"1\"\n    };\n    this.getUpdates = this.getUpdates.bind(this);\n  }\n\n  componentDidMount() {\n    this.getUpdates();\n  }\n\n  getUpdates() {\n    var pusher = new Pusher(PUSHER_APP_KEY, {\n      authEndpoint: PUSHERAUTHMSURL + \"/pusher/auth\",\n      cluster: PUSHER_CLUSTER\n    });\n    var channel = pusher.subscribe('private-test');\n    channel.bind('client-driver-location', data => {\n      this.setState(data);\n      axios.post(`${NGROKURL}/api/new`, {\n        latitude: data.latitude,\n        longitude: data.longitude,\n        accuracy: data.accuracy\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  renderMap() {\n    const {\n      latitude,\n      longitude\n    } = this.state;\n\n    if (latitude == 20 && longitude == 20) {\n      return __jsx(\"div\", {\n        id: \"tracking-not-available\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 20\n        }\n      }, __jsx(\"div\", {\n        id: \"tracking-bar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      }), __jsx(\"h\", {\n        id: \"tracking-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }\n      }, \"Tracking currently not available.\"));\n    } else {\n      return __jsx(\"div\", {\n        id: \"tracking-available\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 20\n        }\n      }, __jsx(Map, {\n        id: \"map\",\n        containerStyle: {\n          position: 'relative'\n        },\n        google: this.props.google,\n        zoom: 18,\n        center: {\n          lat: latitude,\n          lng: longitude\n        },\n        initialCenter: {\n          lat: latitude,\n          lng: longitude\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 49\n        }\n      }, __jsx(Marker, {\n        title: 'The marker`s title will appear as a tooltip.',\n        name: 'SOMA',\n        position: {\n          lat: latitude,\n          lng: longitude\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }), __jsx(InfoWindow, {\n        onClose: this.onInfoWindowClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }, __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, \"\\\"this.state.selectedPlace.name\\\"\")))));\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"tracking-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"tracking-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, \"Tracking\"), this.renderMap(), __jsx(\"div\", {\n      className: \"contact-us-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"Contact Us\"), __jsx(\"div\", {\n      id: \"contact-us\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, __jsx(ContactUsForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default GoogleApiWrapper({\n  apiKey: process.env.GMAPSKEY\n})(Tracking);","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/tracking.js"],"names":["Component","Map","InfoWindow","Marker","GoogleApiWrapper","Pusher","axios","ContactUsForm","PUSHERAUTHMSURL","process","env","PUSHER_APP_KEY","PUSHER_CLUSTER","Tracking","constructor","props","state","getUpdates","bind","componentDidMount","pusher","authEndpoint","cluster","channel","subscribe","data","setState","post","NGROKURL","latitude","longitude","accuracy","then","response","console","log","catch","error","renderMap","position","google","lat","lng","onInfoWindowClose","render","apiKey","GMAPSKEY"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport Pusher from 'pusher-js';\r\nimport axios from 'axios';\r\nimport ContactUsForm from '../components/ContactUsForm'\r\n\r\nconst PUSHERAUTHMSURL = process.env.PUSHERAUTHMSURL;\r\nconst PUSHER_APP_KEY = process.env.PUSHER_APP_KEY;\r\nconst PUSHER_CLUSTER = process.env.PUSHER_CLUSTER;\r\n\r\nclass Tracking extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { \"latitude\": 20, \"longitude\": 20, \"accuracy\": \"1\" };\r\n        this.getUpdates = this.getUpdates.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUpdates();\r\n    }\r\n\r\n    getUpdates() {\r\n        var pusher = new Pusher(PUSHER_APP_KEY, {\r\n            authEndpoint: PUSHERAUTHMSURL + \"/pusher/auth\",\r\n            cluster: PUSHER_CLUSTER\r\n        });\r\n\r\n        var channel = pusher.subscribe('private-test');\r\n\r\n        channel.bind('client-driver-location', (data) => {\r\n\r\n            this.setState(data);\r\n\r\n            axios.post(`${NGROKURL}/api/new`, {\r\n                latitude: data.latitude,\r\n                longitude: data.longitude,\r\n                accuracy: data.accuracy\r\n            })\r\n                .then(function (response) {\r\n                    console.log(response);\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        });\r\n\r\n    }\r\n\r\n    renderMap() {\r\n        const { latitude, longitude } = this.state;\r\n\r\n        if (latitude == 20 && longitude == 20) {\r\n            return <div id=\"tracking-not-available\" >\r\n                <div id=\"tracking-bar\"></div>\r\n                <h id=\"tracking-info\">Tracking currently not available.</h>\r\n            </div >\r\n        } else {\r\n            return <div id=\"tracking-available\"><Map id=\"map\"\r\n                containerStyle={{\r\n                    position: 'relative'\r\n\r\n                }} google={this.props.google} zoom={18} center={{\r\n                    lat: latitude,\r\n                    lng: longitude\r\n                }} initialCenter={{\r\n                    lat: latitude,\r\n                    lng: longitude\r\n                }}>\r\n                <Marker\r\n                    title={'The marker`s title will appear as a tooltip.'}\r\n                    name={'SOMA'}\r\n                    position={{ lat: latitude, lng: longitude }} />\r\n                <InfoWindow onClose={this.onInfoWindowClose}>\r\n                    <div>\r\n                        <h1>\"this.state.selectedPlace.name\"</h1>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map></div>\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"tracking-page\">\r\n                <div className=\"tracking-title\">Tracking</div>\r\n                {this.renderMap()}\r\n                <div className=\"contact-us-title\">Contact Us</div>\r\n                <div id=\"contact-us\">\r\n                    <ContactUsForm />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n    apiKey: (process.env.GMAPSKEY)\r\n})(Tracking);"]},"metadata":{},"sourceType":"module"}