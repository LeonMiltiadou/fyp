{"ast":null,"code":"import _classCallCheck from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/KGM/OneDrive/Documents/GitHub/chec/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from 'react';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport ContactUsForm from '../components/ContactUsForm';\nvar PUSHERAUTHMSURL = process.env.PUSHERAUTHMSURL;\nvar PUSHER_APP_KEY = process.env.PUSHER_APP_KEY;\nvar PUSHER_CLUSTER = process.env.PUSHER_CLUSTER;\n\nvar Tracking = /*#__PURE__*/function (_Component) {\n  _inherits(Tracking, _Component);\n\n  var _super = _createSuper(Tracking);\n\n  function Tracking(props) {\n    var _this;\n\n    _classCallCheck(this, Tracking);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      \"latitude\": 20,\n      \"longitude\": 20,\n      \"accuracy\": \"1\"\n    };\n    _this.getUpdates = _this.getUpdates.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Tracking, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUpdates();\n    }\n  }, {\n    key: \"getUpdates\",\n    value: function getUpdates() {\n      var _this2 = this;\n\n      var pusher = new Pusher(PUSHER_APP_KEY, {\n        authEndpoint: PUSHERAUTHMSURL + \"/pusher/auth\",\n        cluster: PUSHER_CLUSTER\n      });\n      var channel = pusher.subscribe('private-test');\n      channel.bind('client-driver-location', function (data) {\n        _this2.setState(data); //     axios.post(`${NGROKURL}/api/new`, {\n        //         latitude: data.latitude,\n        //         longitude: data.longitude,\n        //         accuracy: data.accuracy\n        //     })\n        //         .then(function (response) {\n        //             console.log(response);\n        //         })\n        //         .catch(function (error) {\n        //             console.log(error);\n        //         });\n\n      });\n    }\n  }, {\n    key: \"renderMap\",\n    value: function renderMap() {\n      var _this$state = this.state,\n          latitude = _this$state.latitude,\n          longitude = _this$state.longitude;\n\n      if (latitude == 20 && longitude == 20) {\n        return __jsx(\"div\", {\n          id: \"tracking-not-available\"\n        }, __jsx(\"div\", {\n          id: \"tracking-bar\"\n        }), __jsx(\"h\", {\n          id: \"tracking-info\"\n        }, \"Tracking currently not available.\"));\n      } else {\n        return __jsx(\"div\", {\n          id: \"tracking-available\"\n        }, __jsx(Map, {\n          id: \"map\",\n          containerStyle: {\n            position: 'relative'\n          },\n          google: this.props.google,\n          zoom: 18,\n          center: {\n            lat: latitude,\n            lng: longitude\n          },\n          initialCenter: {\n            lat: latitude,\n            lng: longitude\n          }\n        }, __jsx(Marker, {\n          title: 'The marker`s title will appear as a tooltip.',\n          name: 'SOMA',\n          position: {\n            lat: latitude,\n            lng: longitude\n          }\n        }), __jsx(InfoWindow, {\n          onClose: this.onInfoWindowClose\n        }, __jsx(\"div\", null, __jsx(\"h1\", null, \"\\\"this.state.selectedPlace.name\\\"\")))));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"tracking-page\"\n      }, __jsx(\"div\", {\n        className: \"tracking-title\"\n      }, \"Tracking\"), this.renderMap(), __jsx(\"div\", {\n        className: \"contact-us-title\"\n      }, \"Contact Us\"), __jsx(\"div\", {\n        id: \"contact-us\"\n      }, __jsx(ContactUsForm, null)));\n    }\n  }]);\n\n  return Tracking;\n}(Component);\n\nexport default GoogleApiWrapper({\n  apiKey: process.env.GMAPSKEY\n})(Tracking);","map":null,"metadata":{},"sourceType":"module"}