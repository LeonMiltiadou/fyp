{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KGM\\\\OneDrive\\\\Documents\\\\GitHub\\\\chec\\\\fyp\\\\pages\\\\myaccount.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// This import is only included in the server build, because it's only used by getServerSideProps\nimport { Component } from 'react';\n\nclass Profile extends Component {\n  render() {\n    return __jsx(\"div\", {\n      className: \"myaccount-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"myaccount-nav-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 9\n      }\n    }, \"My Account\"), __jsx(\"div\", {\n      className: \"myaccount-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"account-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 11\n      }\n    }, \"Profile (server rendered)\"), __jsx(\"img\", {\n      src: user.picture,\n      alt: \"user picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 11\n      }\n    }), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 11\n      }\n    }, \"nickname: \", user.nickname), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 11\n      }\n    }, \"name: \", user.name)));\n  }\n\n}\n\nexport var __N_SSP = true;\nexport default Profile;","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/myaccount.js"],"names":["Component","Profile","render","user","picture","nickname","name"],"mappings":";;;AAAA;AACA,SAASA,SAAT,QAA0B,OAA1B;;AAGA,MAAMC,OAAN,SAAsBD,SAAtB,CAAgC;AAI9BE,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAKE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,EAEE;AAAK,MAAA,GAAG,EAAEC,IAAI,CAACC,OAAf;AAAwB,MAAA,GAAG,EAAC,cAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAcD,IAAI,CAACE,QAAnB,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAUF,IAAI,CAACG,IAAf,CAJF,CALF,CADF;AAcD;;AAnB6B;;;AAiEhC,eAAeL,OAAf","sourcesContent":["// This import is only included in the server build, because it's only used by getServerSideProps\r\nimport { Component } from 'react';\r\nimport auth0 from '../lib/auth0'\r\n\r\nclass Profile extends Component {\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div className=\"myaccount-page\">\r\n\r\n        <div className=\"myaccount-nav-title\">My Account</div>\r\n        <div className=\"myaccount-nav\"></div>\r\n\r\n        <div className=\"account-details\">\r\n          <h3>Profile (server rendered)</h3>\r\n          <img src={user.picture} alt=\"user picture\" />\r\n          <p>nickname: {user.nickname}</p>\r\n          <p>name: {user.name}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nasync function listOrdersForCustomer(customerID) {\r\n  try {\r\n    const ordermanagementAPI = axios.create({\r\n      baseURL: process.env.ORDERMANAGEMENTMSURL,\r\n      timeout: 3000,\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    });\r\n    return await ordermanagementAPI.get(\"/listorders/\" + customerID).then((orders) => {\r\n\r\n      return orders.data; // Add returns for other catch \r\n\r\n    }).catch((error) => {\r\n      console.log('There was an error retrieving a list of orders for the customer', error);\r\n      return null;\r\n    });\r\n  } catch (error) {\r\n    console.error('There was an error retrieving a list of orders for the customer' + customerID, error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getServerSideProps({ req, res }) {\r\n  // Here you can check authentication status directly before rendering the page,\r\n  // however the page would be a serverless function, which is more expensive and\r\n  // slower than a static page with client side authentication\r\n  const x = 5;\r\n  const session = await auth0.getSession(req, res)\r\n\r\n  if (!session || !session.user) {\r\n    res.writeHead(302, {\r\n      Location: '/api/login',\r\n    })\r\n    res.end()\r\n    return\r\n  }\r\n\r\n  const orders = await listOrdersForCustomer(session);\r\n  return { props: { user: session.user, orders: orders } }\r\n}\r\n\r\nexport default Profile\r\n"]},"metadata":{},"sourceType":"module"}