{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{\"45Vf\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"o0o1\"),i=n.n(a);function s(e,t,n,a,i,s,o){try{var c=e[s](o),h=c.value}catch(r){return void n(r)}c.done?t(h):Promise.resolve(h).then(a,i)}var o=n(\"1OyB\"),c=n(\"vuIU\"),h=n(\"JX7q\"),r=n(\"Ji7U\"),l=n(\"md7G\"),u=n(\"foSv\"),p=n(\"rePB\"),m=n(\"q1tI\"),d=n.n(m),g=n(\"oKQX\"),_=n(\"26zG\"),k=(n(\"gHh/\"),d.a.createElement);function y(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var i=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var f=function(e){Object(r.a)(n,e);var t=y(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={checkoutToken:{},firstName:\"Jane\",lastName:\"Doe\",email:\"janedoe@email.com\",shippingName:\"Jane Doe\",shippingStreet:\"123 Fake St\",shippingCity:\"\",shippingStateProvince:\"\",shippingPostalZipCode:\"\",shippingCountry:\"\",cardNum:\"4242 4242 4242 4242\",expMonth:\"11\",expYear:\"2023\",ccv:\"123\",billingPostalZipcode:\"\",shippingCountries:{},shippingSubdivisions:{},shippingOptions:[],shippingOption:\"\"},a.handleFormChanges=a.handleFormChanges.bind(Object(h.a)(a)),a.handleShippingCountryChange=a.handleShippingCountryChange.bind(Object(h.a)(a)),a.handleSubdivisionChange=a.handleSubdivisionChange.bind(Object(h.a)(a)),a.handleCaptureCheckout=a.handleCaptureCheckout.bind(Object(h.a)(a)),a}return Object(c.a)(n,[{key:\"getStaticProps\",value:function(){var e,t=(e=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.generateCheckoutToken();case 1:case\"end\":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function c(e){s(o,a,i,c,h,\"next\",e)}function h(e){s(o,a,i,c,h,\"throw\",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}()},{key:\"componentDidMount\",value:function(){}},{key:\"componentDidUpdate\",value:function(e,t){this.state.shippingCountry!==t.shippingCountry&&this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry)}},{key:\"generateCheckoutToken\",value:function(){var e=this,t=this.context.cart;if(t.line_items.length)return g.a.checkout.generateToken(t.id,{type:\"cart\"}).then((function(t){return e.setState({checkoutToken:t})})).then((function(){return e.fetchShippingCountries(e.state.checkoutToken.id)})).catch((function(e){console.log(\"There was an error in generating a token\",e)}))}},{key:\"fetchShippingCountries\",value:function(e){var t=this;g.a.services.localeListShippingCountries(e).then((function(e){t.setState({shippingCountries:e.countries})})).catch((function(e){console.log(\"There was an error fetching a list of shipping countries\",e)}))}},{key:\"fetchSubdivisions\",value:function(e){var t=this;g.a.services.localeListSubdivisions(e).then((function(e){t.setState({shippingSubdivisions:e.subdivisions})})).catch((function(e){console.log(\"There was an error fetching the subdivisions\",e)}))}},{key:\"fetchShippingOptions\",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;g.a.checkout.getShippingOptions(e,{country:t,region:a}).then((function(e){var t=e[0]||null;n.setState({shippingOption:t,shippingOptions:e})})).catch((function(e){console.log(\"There was an error fetching the shipping methods\",e)}))}},{key:\"handleFormChanges\",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:\"handleShippingCountryChange\",value:function(e){var t=e.target.value;this.fetchSubdivisions(t)}},{key:\"handleSubdivisionChange\",value:function(e){var t=e.target.value;this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry,t)}},{key:\"handleCaptureCheckout\",value:function(e){e.preventDefault();var t={line_items:this.state.checkoutToken.live.line_items,customer:{firstname:this.state.firstName,lastname:this.state.lastName,email:this.state.email},shipping:{name:this.state.shippingName,street:this.state.shippingStreet,town_city:this.state.shippingCity,county_state:this.state.shippingStateProvince,postal_zip_code:this.state.shippingPostalZipCode,country:this.state.shippingCountry},fulfillment:{shipping_method:this.state.shippingOption.id},payment:{gateway:\"test_gateway\",card:{number:this.state.cardNum,expiry_month:this.state.expMonth,expiry_year:this.state.expYear,cvc:this.state.ccv,postal_zip_code:this.state.billingPostalZipcode}}};this.context.handleCaptureCheckout(this.state.checkoutToken.id,t)}},{key:\"renderCheckoutForm\",value:function(){var e=this.state,t=e.shippingCountries,n=e.shippingSubdivisions,a=e.shippingOptions;return k(\"form\",{className:\"checkout__form\",onChange:this.handleFormChanges},k(\"h4\",{className:\"checkout__subheading\"},\"Customer information\"),k(\"label\",{className:\"checkout__label\",htmlFor:\"firstName\"},\"First name\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.firstName,name:\"firstName\",placeholder:\"Enter your first name\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"lastName\"},\"Last name\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.lastName,name:\"lastName\",placeholder:\"Enter your last name\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"email\"},\"Email\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.email,name:\"email\",placeholder:\"Enter your email\",required:!0}),k(\"h4\",{className:\"checkout__subheading\"},\"Shipping details\"),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingName\"},\"Full name\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingName,name:\"shippingName\",placeholder:\"Enter your shipping full name\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStreet\"},\"Street address\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingStreet,name:\"shippingStreet\",placeholder:\"Enter your street address\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCity\"},\"City\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingCity,name:\"shippingCity\",placeholder:\"Enter your city\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingPostalZipCode\"},\"Postal/Zip code\"),k(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingPostalZipCode,name:\"shippingPostalZipCode\",placeholder:\"Enter your postal/zip code\",required:!0}),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCountry\"},\"Country\"),k(\"select\",{value:this.state.shippingCountry,name:\"shippingCountry\",onChange:this.handleShippingCountryChange,className:\"checkout__select\"},k(\"option\",{disabled:!0},\"Country\"),Object.keys(t).map((function(e){return k(\"option\",{value:e,key:e},t[e])})),\";\"),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStateProvince\"},\"State/province\"),k(\"select\",{value:this.state.shippingStateProvince,name:\"shippingStateProvince\",onChange:this.handleSubdivisionChange,className:\"checkout__select\"},k(\"option\",{className:\"checkout__option\",disabled:!0},\"State/province\"),Object.keys(n).map((function(e){return k(\"option\",{value:e,key:e},n[e])})),\";\"),k(\"label\",{className:\"checkout__label\",htmlFor:\"shippingOption\"},\"Shipping method\"),k(\"select\",{value:this.state.shippingOption.id,name:\"shippingOption\",onChange:this.handleFormChanges,className:\"checkout__select\"},k(\"option\",{className:\"checkout__select-option\",disabled:!0},\"Select a shipping method\"),a.map((function(e,t){return k(\"option\",{className:\"checkout__select-option\",value:e.id,key:t},\"\".concat(e.description,\" - $\").concat(e.price.formatted_with_code))})),\";\"),k(\"h4\",{className:\"checkout__subheading\"},\"Payment information\"),k(\"label\",{className:\"checkout__label\",htmlFor:\"cardNum\"},\"Credit card number\"),k(\"input\",{className:\"checkout__input\",type:\"text\",name:\"cardNum\",onChange:this.handleFormChanges,value:this.state.cardNum,placeholder:\"Enter your card number\"}),k(\"label\",{className:\"checkout__label\",htmlFor:\"expMonth\"},\"Expiry month\"),k(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expMonth\",onChange:this.handleFormChanges,value:this.state.expMonth,placeholder:\"Card expiry month\"}),k(\"label\",{className:\"checkout__label\",htmlFor:\"expYear\"},\"Expiry year\"),k(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expYear\",onChange:this.handleFormChanges,value:this.state.expYear,placeholder:\"Card expiry year\"}),k(\"label\",{className:\"checkout__label\",htmlFor:\"ccv\"},\"CCV\"),k(\"input\",{className:\"checkout__input\",type:\"text\",name:\"ccv\",onChange:this.handleFormChanges,value:this.state.ccv,placeholder:\"CCV (3 digits)\"}),k(\"button\",{onClick:this.handleCaptureCheckout,className:\"checkout__btn-confirm\"},\"Confirm order\"))}},{key:\"renderCheckoutSummary\",value:function(){var e=this.context.cart;return k(d.a.Fragment,null,k(\"div\",{className:\"checkout__summary\"},k(\"h4\",null,\"Order summary\"),e.line_items.map((function(e){return k(d.a.Fragment,null,k(\"div\",{key:e.id,className:\"checkout__summary-details\"},k(\"img\",{className:\"checkout__summary-img\",src:e.media.source,alt:e.name}),k(\"p\",{className:\"checkout__summary-name\"},e.quantity,\" x \",e.name),k(\"p\",{className:\"checkout__summary-value\"},e.line_total.formatted_with_symbol)))})),k(\"div\",{className:\"checkout__summary-total\"},k(\"p\",{className:\"checkout__summary-price\"},k(\"span\",null,\"Subtotal:\"),e.subtotal.formatted_with_symbol))))}},{key:\"render\",value:function(){return k(\"div\",{className:\"checkout\"},k(\"h2\",{className:\"checkout__heading\"},\"Checkout\"),k(\"div\",{className:\"checkout__wrapper\"},this.renderCheckoutForm(),this.renderCheckoutSummary()))}}]),n}(m.Component);Object(p.a)(f,\"contextType\",_.a);t.default=f},HtAB:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Checkout\",function(){return n(\"45Vf\")}])},\"gHh/\":function(e,t,n){e.exports=n(\"nOHt\")},rePB:function(e,t,n){\"use strict\";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",(function(){return a}))}},[[\"HtAB\",0,1,2,3]]]);","extractedComments":[]}