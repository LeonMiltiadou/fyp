{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{\"45Vf\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"1OyB\"),i=a(\"vuIU\"),s=a(\"JX7q\"),o=a(\"Ji7U\"),c=a(\"md7G\"),h=a(\"foSv\"),l=a(\"rePB\"),r=a(\"q1tI\"),u=a.n(r),p=a(\"oKQX\"),m=a(\"26zG\"),d=u.a.createElement;function g(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(h.a)(e);if(t){var i=Object(h.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(c.a)(this,a)}}var _=function(e){Object(o.a)(a,e);var t=g(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={checkoutToken:{},firstName:\"Jane\",lastName:\"Doe\",email:\"janedoe@email.com\",shippingName:\"Jane Doe\",shippingStreet:\"123 Fake St\",shippingCity:\"\",shippingStateProvince:\"\",shippingPostalZipCode:\"\",shippingCountry:\"\",cardNum:\"4242 4242 4242 4242\",expMonth:\"11\",expYear:\"2023\",ccv:\"123\",billingPostalZipcode:\"\",shippingCountries:{},shippingSubdivisions:{},shippingOptions:[],shippingOption:\"\"},i.handleFormChanges=i.handleFormChanges.bind(Object(s.a)(i)),i.handleShippingCountryChange=i.handleShippingCountryChange.bind(Object(s.a)(i)),i.handleSubdivisionChange=i.handleSubdivisionChange.bind(Object(s.a)(i)),i.handleCaptureCheckout=i.handleCaptureCheckout.bind(Object(s.a)(i)),i}return Object(i.a)(a,[{key:\"componentDidMount\",value:function(){this.generateCheckoutToken()}},{key:\"componentDidUpdate\",value:function(e,t){this.state.shippingCountry!==t.shippingCountry&&this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry)}},{key:\"generateCheckoutToken\",value:function(){var e=this,t=this.context.cart;if(t.line_items.length)return p.a.checkout.generateToken(t.id,{type:\"cart\"}).then((function(t){return e.setState({checkoutToken:t})})).then((function(){return e.fetchShippingCountries(e.state.checkoutToken.id)})).catch((function(e){console.log(\"There was an error in generating a token\",e)}))}},{key:\"fetchShippingCountries\",value:function(e){var t=this;p.a.services.localeListShippingCountries(e).then((function(e){t.setState({shippingCountries:e.countries})})).catch((function(e){console.log(\"There was an error fetching a list of shipping countries\",e)}))}},{key:\"fetchSubdivisions\",value:function(e){var t=this;p.a.services.localeListSubdivisions(e).then((function(e){t.setState({shippingSubdivisions:e.subdivisions})})).catch((function(e){console.log(\"There was an error fetching the subdivisions\",e)}))}},{key:\"fetchShippingOptions\",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p.a.checkout.getShippingOptions(e,{country:t,region:n}).then((function(e){var t=e[0]||null;a.setState({shippingOption:t,shippingOptions:e})})).catch((function(e){console.log(\"There was an error fetching the shipping methods\",e)}))}},{key:\"handleFormChanges\",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:\"handleShippingCountryChange\",value:function(e){var t=e.target.value;this.fetchSubdivisions(t)}},{key:\"handleSubdivisionChange\",value:function(e){var t=e.target.value;this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry,t)}},{key:\"handleCaptureCheckout\",value:function(e){e.preventDefault();var t={line_items:this.state.checkoutToken.live.line_items,customer:{firstname:this.state.firstName,lastname:this.state.lastName,email:this.state.email},shipping:{name:this.state.shippingName,street:this.state.shippingStreet,town_city:this.state.shippingCity,county_state:this.state.shippingStateProvince,postal_zip_code:this.state.shippingPostalZipCode,country:this.state.shippingCountry},fulfillment:{shipping_method:this.state.shippingOption.id},payment:{gateway:\"test_gateway\",card:{number:this.state.cardNum,expiry_month:this.state.expMonth,expiry_year:this.state.expYear,cvc:this.state.ccv,postal_zip_code:this.state.billingPostalZipcode}}};this.context.handleCaptureCheckout(this.state.checkoutToken.id,t)}},{key:\"renderCheckoutForm\",value:function(){var e=this.state,t=e.shippingCountries,a=e.shippingSubdivisions,n=e.shippingOptions;return d(\"form\",{className:\"checkout__form\",onChange:this.handleFormChanges},d(\"h4\",{className:\"checkout__subheading\"},\"Customer information\"),d(\"label\",{className:\"checkout__label\",htmlFor:\"firstName\"},\"First name\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.firstName,name:\"firstName\",placeholder:\"Enter your first name\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"lastName\"},\"Last name\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.lastName,name:\"lastName\",placeholder:\"Enter your last name\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"email\"},\"Email\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.email,name:\"email\",placeholder:\"Enter your email\",required:!0}),d(\"h4\",{className:\"checkout__subheading\"},\"Shipping details\"),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingName\"},\"Full name\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingName,name:\"shippingName\",placeholder:\"Enter your shipping full name\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStreet\"},\"Street address\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingStreet,name:\"shippingStreet\",placeholder:\"Enter your street address\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCity\"},\"City\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingCity,name:\"shippingCity\",placeholder:\"Enter your city\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingPostalZipCode\"},\"Postal/Zip code\"),d(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingPostalZipCode,name:\"shippingPostalZipCode\",placeholder:\"Enter your postal/zip code\",required:!0}),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCountry\"},\"Country\"),d(\"select\",{value:this.state.shippingCountry,name:\"shippingCountry\",onChange:this.handleShippingCountryChange,className:\"checkout__select\"},d(\"option\",{disabled:!0},\"Country\"),Object.keys(t).map((function(e){return d(\"option\",{value:e,key:e},t[e])})),\";\"),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStateProvince\"},\"State/province\"),d(\"select\",{value:this.state.shippingStateProvince,name:\"shippingStateProvince\",onChange:this.handleSubdivisionChange,className:\"checkout__select\"},d(\"option\",{className:\"checkout__option\",disabled:!0},\"State/province\"),Object.keys(a).map((function(e){return d(\"option\",{value:e,key:e},a[e])})),\";\"),d(\"label\",{className:\"checkout__label\",htmlFor:\"shippingOption\"},\"Shipping method\"),d(\"select\",{value:this.state.shippingOption.id,name:\"shippingOption\",onChange:this.handleFormChanges,className:\"checkout__select\"},d(\"option\",{className:\"checkout__select-option\",disabled:!0},\"Select a shipping method\"),n.map((function(e,t){return d(\"option\",{className:\"checkout__select-option\",value:e.id,key:t},\"\".concat(e.description,\" - $\").concat(e.price.formatted_with_code))})),\";\"),d(\"h4\",{className:\"checkout__subheading\"},\"Payment information\"),d(\"label\",{className:\"checkout__label\",htmlFor:\"cardNum\"},\"Credit card number\"),d(\"input\",{className:\"checkout__input\",type:\"text\",name:\"cardNum\",onChange:this.handleFormChanges,value:this.state.cardNum,placeholder:\"Enter your card number\"}),d(\"label\",{className:\"checkout__label\",htmlFor:\"expMonth\"},\"Expiry month\"),d(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expMonth\",onChange:this.handleFormChanges,value:this.state.expMonth,placeholder:\"Card expiry month\"}),d(\"label\",{className:\"checkout__label\",htmlFor:\"expYear\"},\"Expiry year\"),d(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expYear\",onChange:this.handleFormChanges,value:this.state.expYear,placeholder:\"Card expiry year\"}),d(\"label\",{className:\"checkout__label\",htmlFor:\"ccv\"},\"CCV\"),d(\"input\",{className:\"checkout__input\",type:\"text\",name:\"ccv\",onChange:this.handleFormChanges,value:this.state.ccv,placeholder:\"CCV (3 digits)\"}),d(\"button\",{onClick:this.handleCaptureCheckout,className:\"checkout__btn-confirm\"},\"Confirm order\"))}},{key:\"renderCheckoutSummary\",value:function(){var e=this.context.cart;return d(u.a.Fragment,null,d(\"div\",{className:\"checkout__summary\"},d(\"h4\",null,\"Order summary\"),e.line_items.map((function(e){return d(u.a.Fragment,null,d(\"div\",{key:e.id,className:\"checkout__summary-details\"},d(\"img\",{className:\"checkout__summary-img\",src:e.media.source,alt:e.name}),d(\"p\",{className:\"checkout__summary-name\"},e.quantity,\" x \",e.name),d(\"p\",{className:\"checkout__summary-value\"},e.line_total.formatted_with_symbol)))})),d(\"div\",{className:\"checkout__summary-total\"},d(\"p\",{className:\"checkout__summary-price\"},d(\"span\",null,\"Subtotal:\"),e.subtotal.formatted_with_symbol))))}},{key:\"render\",value:function(){return d(\"div\",{className:\"checkout\"},d(\"h2\",{className:\"checkout__heading\"},\"Checkout\"),d(\"div\",{className:\"checkout__wrapper\"},this.renderCheckoutForm()))}}]),a}(r.Component);Object(l.a)(_,\"contextType\",m.a),t.default=_},HtAB:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Checkout\",function(){return a(\"45Vf\")}])},rePB:function(e,t,a){\"use strict\";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,\"a\",(function(){return n}))}},[[\"HtAB\",0,1,2,4]]]);","extractedComments":[]}