{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{\"1OyB\":function(e,t,n){\"use strict\";function a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}n.d(t,\"a\",(function(){return a}))},\"45Vf\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"1OyB\"),i=n(\"vuIU\"),o=n(\"JX7q\"),s=n(\"Ji7U\"),c=n(\"md7G\"),r=n(\"foSv\"),h=n(\"q1tI\"),u=n.n(h),l=n(\"oKQX\"),p=u.a.createElement;function m(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var d=function(e){Object(s.a)(n,e);var t=m(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={checkoutToken:{},firstName:\"Jane\",lastName:\"Doe\",email:\"janedoe@email.com\",shippingName:\"Jane Doe\",shippingStreet:\"123 Fake St\",shippingCity:\"\",shippingStateProvince:\"\",shippingPostalZipCode:\"\",shippingCountry:\"\",cardNum:\"4242 4242 4242 4242\",expMonth:\"11\",expYear:\"2023\",ccv:\"123\",billingPostalZipcode:\"\",shippingCountries:{},shippingSubdivisions:{},shippingOptions:[],shippingOption:\"\"},i.handleFormChanges=i.handleFormChanges.bind(Object(o.a)(i)),i.handleShippingCountryChange=i.handleShippingCountryChange.bind(Object(o.a)(i)),i.handleSubdivisionChange=i.handleSubdivisionChange.bind(Object(o.a)(i)),i.handleCaptureCheckout=i.handleCaptureCheckout.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:\"componentDidMount\",value:function(){this.generateCheckoutToken()}},{key:\"componentDidUpdate\",value:function(e,t){this.state.shippingCountry!==t.shippingCountry&&this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry)}},{key:\"generateCheckoutToken\",value:function(){var e=this,t=this.props.cart;if(t.line_items.length)return l.a.checkout.generateToken(t.id,{type:\"cart\"}).then((function(t){return e.setState({checkoutToken:t})})).then((function(){return e.fetchShippingCountries(e.state.checkoutToken.id)})).catch((function(e){console.log(\"There was an error in generating a token\",e)}))}},{key:\"fetchShippingCountries\",value:function(e){var t=this;l.a.services.localeListShippingCountries(e).then((function(e){t.setState({shippingCountries:e.countries})})).catch((function(e){console.log(\"There was an error fetching a list of shipping countries\",e)}))}},{key:\"fetchSubdivisions\",value:function(e){var t=this;l.a.services.localeListSubdivisions(e).then((function(e){t.setState({shippingSubdivisions:e.subdivisions})})).catch((function(e){console.log(\"There was an error fetching the subdivisions\",e)}))}},{key:\"fetchShippingOptions\",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l.a.checkout.getShippingOptions(e,{country:t,region:a}).then((function(e){var t=e[0]||null;n.setState({shippingOption:t,shippingOptions:e})})).catch((function(e){console.log(\"There was an error fetching the shipping methods\",e)}))}},{key:\"handleFormChanges\",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:\"handleShippingCountryChange\",value:function(e){var t=e.target.value;this.fetchSubdivisions(t)}},{key:\"handleSubdivisionChange\",value:function(e){var t=e.target.value;this.fetchShippingOptions(this.state.checkoutToken.id,this.state.shippingCountry,t)}},{key:\"handleCaptureCheckout\",value:function(e){e.preventDefault();var t={line_items:this.state.checkoutToken.live.line_items,customer:{firstname:this.state.firstName,lastname:this.state.lastName,email:this.state.email},shipping:{name:this.state.shippingName,street:this.state.shippingStreet,town_city:this.state.shippingCity,county_state:this.state.shippingStateProvince,postal_zip_code:this.state.shippingPostalZipCode,country:this.state.shippingCountry},fulfillment:{shipping_method:this.state.shippingOption.id},payment:{gateway:\"test_gateway\",card:{number:this.state.cardNum,expiry_month:this.state.expMonth,expiry_year:this.state.expYear,cvc:this.state.ccv,postal_zip_code:this.state.billingPostalZipcode}}};this.props.onCaptureCheckout(this.state.checkoutToken.id,t),this.props.history.push(\"/confirmation\")}},{key:\"renderCheckoutForm\",value:function(){var e=this.state,t=e.shippingCountries,n=e.shippingSubdivisions,a=e.shippingOptions;return p(\"form\",{className:\"checkout__form\",onChange:this.handleFormChanges},p(\"h4\",{className:\"checkout__subheading\"},\"Customer information\"),p(\"label\",{className:\"checkout__label\",htmlFor:\"firstName\"},\"First name\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.firstName,name:\"firstName\",placeholder:\"Enter your first name\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"lastName\"},\"Last name\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.lastName,name:\"lastName\",placeholder:\"Enter your last name\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"email\"},\"Email\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.email,name:\"email\",placeholder:\"Enter your email\",required:!0}),p(\"h4\",{className:\"checkout__subheading\"},\"Shipping details\"),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingName\"},\"Full name\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingName,name:\"shippingName\",placeholder:\"Enter your shipping full name\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStreet\"},\"Street address\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingStreet,name:\"shippingStreet\",placeholder:\"Enter your street address\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCity\"},\"City\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingCity,name:\"shippingCity\",placeholder:\"Enter your city\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingPostalZipCode\"},\"Postal/Zip code\"),p(\"input\",{className:\"checkout__input\",type:\"text\",onChange:this.handleFormChanges,value:this.state.shippingPostalZipCode,name:\"shippingPostalZipCode\",placeholder:\"Enter your postal/zip code\",required:!0}),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingCountry\"},\"Country\"),p(\"select\",{value:this.state.shippingCountry,name:\"shippingCountry\",onChange:this.handleShippingCountryChange,className:\"checkout__select\"},p(\"option\",{disabled:!0},\"Country\"),Object.keys(t).map((function(e){return p(\"option\",{value:e,key:e},t[e])})),\";\"),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingStateProvince\"},\"State/province\"),p(\"select\",{value:this.state.shippingStateProvince,name:\"shippingStateProvince\",onChange:this.handleSubdivisionChange,className:\"checkout__select\"},p(\"option\",{className:\"checkout__option\",disabled:!0},\"State/province\"),Object.keys(n).map((function(e){return p(\"option\",{value:e,key:e},n[e])})),\";\"),p(\"label\",{className:\"checkout__label\",htmlFor:\"shippingOption\"},\"Shipping method\"),p(\"select\",{value:this.state.shippingOption.id,name:\"shippingOption\",onChange:this.handleFormChanges,className:\"checkout__select\"},p(\"option\",{className:\"checkout__select-option\",disabled:!0},\"Select a shipping method\"),a.map((function(e,t){return p(\"option\",{className:\"checkout__select-option\",value:e.id,key:t},\"\".concat(e.description,\" - $\").concat(e.price.formatted_with_code))})),\";\"),p(\"h4\",{className:\"checkout__subheading\"},\"Payment information\"),p(\"label\",{className:\"checkout__label\",htmlFor:\"cardNum\"},\"Credit card number\"),p(\"input\",{className:\"checkout__input\",type:\"text\",name:\"cardNum\",onChange:this.handleFormChanges,value:this.state.cardNum,placeholder:\"Enter your card number\"}),p(\"label\",{className:\"checkout__label\",htmlFor:\"expMonth\"},\"Expiry month\"),p(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expMonth\",onChange:this.handleFormChanges,value:this.state.expMonth,placeholder:\"Card expiry month\"}),p(\"label\",{className:\"checkout__label\",htmlFor:\"expYear\"},\"Expiry year\"),p(\"input\",{className:\"checkout__input\",type:\"text\",name:\"expYear\",onChange:this.handleFormChanges,value:this.state.expYear,placeholder:\"Card expiry year\"}),p(\"label\",{className:\"checkout__label\",htmlFor:\"ccv\"},\"CCV\"),p(\"input\",{className:\"checkout__input\",type:\"text\",name:\"ccv\",onChange:this.handleFormChanges,value:this.state.ccv,placeholder:\"CCV (3 digits)\"}),p(\"button\",{onClick:this.handleCaptureCheckout,className:\"checkout__btn-confirm\"},\"Confirm order\"))}},{key:\"renderCheckoutSummary\",value:function(){var e=this.props.cart;return p(u.a.Fragment,null,p(\"div\",{className:\"checkout__summary\"},p(\"h4\",null,\"Order summary\"),e.line_items.map((function(e){return p(u.a.Fragment,null,p(\"div\",{key:e.id,className:\"checkout__summary-details\"},p(\"img\",{className:\"checkout__summary-img\",src:e.media.source,alt:e.name}),p(\"p\",{className:\"checkout__summary-name\"},e.quantity,\" x \",e.name),p(\"p\",{className:\"checkout__summary-value\"},e.line_total.formatted_with_symbol)))})),p(\"div\",{className:\"checkout__summary-total\"},p(\"p\",{className:\"checkout__summary-price\"},p(\"span\",null,\"Subtotal:\"),e.subtotal.formatted_with_symbol))))}},{key:\"render\",value:function(){return p(\"div\",{className:\"checkout\"},p(\"h2\",{className:\"checkout__heading\"},\"Checkout\"),p(\"div\",{className:\"checkout__wrapper\"},this.renderCheckoutForm(),this.renderCheckoutSummary()))}}]),n}(h.Component);t.default=d},HtAB:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Checkout\",function(){return n(\"45Vf\")}])},JX7q:function(e,t,n){\"use strict\";function a(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}n.d(t,\"a\",(function(){return a}))},Ji7U:function(e,t,n){\"use strict\";function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if(\"function\"!==typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}n.d(t,\"a\",(function(){return i}))},foSv:function(e,t,n){\"use strict\";function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,\"a\",(function(){return a}))},md7G:function(e,t,n){\"use strict\";function a(e){return(a=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}n.d(t,\"a\",(function(){return o}));var i=n(\"JX7q\");function o(e,t){return!t||\"object\"!==a(t)&&\"function\"!==typeof t?Object(i.a)(e):t}},vuIU:function(e,t,n){\"use strict\";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,\"a\",(function(){return i}))}},[[\"HtAB\",0,1,2,4]]]);","extractedComments":[]}