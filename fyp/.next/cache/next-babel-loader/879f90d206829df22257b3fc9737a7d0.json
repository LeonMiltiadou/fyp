{"ast":null,"code":"import auth0 from '../../lib/auth0';\nconst authAPI = axios.create({\n  baseURL: process.env.AUTHMSBASEURL,\n  timeout: 3000,\n  headers: {\n    \"Accept\": \"application/json\",\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default async function login(req, res) {\n  await authAPI.get(\"/api/me\").then(cookie => {\n    if (cookie) {\n      return {\n        headers: {\n          cookie\n        }\n      };\n    } else {\n      return {};\n    }\n  }).catch(error => {\n    console.error(error);\n    return {};\n  });\n\n  try {\n    await auth0.handleLogin(req, res);\n  } catch (error) {\n    console.error(error);\n    res.status(error.status || 500).end(error.message);\n  }\n}","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/api/login.js"],"names":["auth0","authAPI","axios","create","baseURL","process","env","AUTHMSBASEURL","timeout","headers","login","req","res","get","then","cookie","catch","error","console","handleLogin","status","end","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,iBAAlB;AAGA,MAAMC,OAAO,GAAGC,KAAK,CAACC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,aADM;AAE3BC,EAAAA,OAAO,EAAE,IAFkB;AAG3BC,EAAAA,OAAO,EAAE;AACP,cAAU,kBADH;AAEP,oBAAgB;AAFT;AAHkB,CAAb,CAAhB;AASA,eAAe,eAAeC,KAAf,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+B;AAE5C,QAAMX,OAAO,CAACY,GAAR,CAAY,SAAZ,EAAuBC,IAAvB,CAA4BC,MAAM,IAAI;AAC1C,QAAIA,MAAJ,EAAY;AACV,aAAO;AACLN,QAAAA,OAAO,EAAE;AACPM,UAAAA;AADO;AADJ,OAAP;AAKD,KAND,MAMO;AACL,aAAO,EAAP;AACD;AACF,GAVK,EAUHC,KAVG,CAUGC,KAAK,IAAI;AAChBC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACA,WAAO,EAAP;AACD,GAbK,CAAN;;AAiBA,MAAI;AACF,UAAMjB,KAAK,CAACmB,WAAN,CAAkBR,GAAlB,EAAuBC,GAAvB,CAAN;AACD,GAFD,CAEE,OAAOK,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAL,IAAAA,GAAG,CAACQ,MAAJ,CAAWH,KAAK,CAACG,MAAN,IAAgB,GAA3B,EAAgCC,GAAhC,CAAoCJ,KAAK,CAACK,OAA1C;AACD;AACF","sourcesContent":["import auth0 from '../../lib/auth0'\r\n\r\n\r\nconst authAPI = axios.create({\r\n  baseURL: process.env.AUTHMSBASEURL,\r\n  timeout: 3000,\r\n  headers: {\r\n    \"Accept\": \"application/json\",\r\n    \"Content-Type\": \"application/json\",\r\n  }\r\n});\r\n\r\nexport default async function login(req, res) {\r\n\r\n  await authAPI.get(\"/api/me\").then(cookie => {\r\n    if (cookie) {\r\n      return {\r\n        headers: {\r\n          cookie,\r\n        }\r\n      }\r\n    } else {\r\n      return {}\r\n    }\r\n  }).catch(error => {\r\n    console.error(error);\r\n    return {};\r\n  });\r\n\r\n\r\n\r\n  try {\r\n    await auth0.handleLogin(req, res)\r\n  } catch (error) {\r\n    console.error(error)\r\n    res.status(error.status || 500).end(error.message)\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}