{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KGM\\\\OneDrive\\\\Documents\\\\GitHub\\\\chec\\\\fyp\\\\pages\\\\Tracking.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Component } from 'react';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\n\nclass Tracking extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: {\n        \"latitude\": \"1\",\n        \"longitude\": \"1\",\n        \"accuracy\": \"1\"\n      }\n    };\n    this.getUpdates = this.getUpdates.bind(this);\n  }\n\n  componentDidMount() {\n    this.getUpdates();\n  }\n\n  getUpdates() {\n    var pusher = new Pusher('4b368d79d76620bdd3a5', {\n      authEndpoint: 'https://22e7a901651d.ngrok.io/pusher/auth',\n      cluster: 'eu'\n    });\n    var channel = pusher.subscribe('private-test');\n    channel.bind('client-driver-location', data => {\n      console.log(data);\n      axios.post('http://localhost:9000/api/new', {\n        latitude: data.latitude,\n        longitude: data.longitude,\n        accuracy: data.accuracy\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  render() {\n    let {\n      latitude,\n      longitude\n    } = this.state.location;\n    return __jsx(Map, {\n      google: this.props.google,\n      zoom: 14,\n      center: {\n        lat: {\n          latitude\n        },\n        lng: {\n          longitude\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, __jsx(Marker, {\n      onClick: this.onMarkerClick,\n      name: \"{'Current location'}\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }), __jsx(InfoWindow, {\n      onClose: this.onInfoWindowClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, \"\\\"this.state.selectedPlace.name\\\"\"))));\n  }\n\n}\n\nexport default GoogleApiWrapper({\n  apiKey: process.env.GMAPSKEY\n})(Tracking);","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/Tracking.js"],"names":["Component","Map","InfoWindow","Marker","GoogleApiWrapper","Pusher","axios","Tracking","constructor","props","state","location","getUpdates","bind","componentDidMount","pusher","authEndpoint","cluster","channel","subscribe","data","console","log","post","latitude","longitude","accuracy","then","response","catch","error","render","google","lat","lng","onMarkerClick","onInfoWindowClose","apiKey","process","env","GMAPSKEY"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,GAAT,EAAcC,UAAd,EAA0BC,MAA1B,EAAkCC,gBAAlC,QAA0D,mBAA1D;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,QAAN,SAAuBP,SAAvB,CAAiC;AAC7BQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAE;AAAE,oBAAY,GAAd;AAAmB,qBAAa,GAAhC;AAAqC,oBAAY;AAAjD;AAAZ,KAAb;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKF,UAAL;AACH;;AAEDA,EAAAA,UAAU,GAAG;AACT,QAAIG,MAAM,GAAG,IAAIV,MAAJ,CAAW,sBAAX,EAAmC;AAC5CW,MAAAA,YAAY,EAAE,2CAD8B;AAE5CC,MAAAA,OAAO,EAAE;AAFmC,KAAnC,CAAb;AAKA,QAAIC,OAAO,GAAGH,MAAM,CAACI,SAAP,CAAiB,cAAjB,CAAd;AAEAD,IAAAA,OAAO,CAACL,IAAR,CAAa,wBAAb,EAAwCO,IAAD,IAAU;AAC7CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAd,MAAAA,KAAK,CAACiB,IAAN,CAAW,+BAAX,EAA4C;AACxCC,QAAAA,QAAQ,EAAEJ,IAAI,CAACI,QADyB;AAExCC,QAAAA,SAAS,EAAEL,IAAI,CAACK,SAFwB;AAGxCC,QAAAA,QAAQ,EAAEN,IAAI,CAACM;AAHyB,OAA5C,EAKGC,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxBP,QAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACD,OAPH,EAQGC,KARH,CAQS,UAAUC,KAAV,EAAiB;AACtBT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;AACD,OAVH;AAWH,KAbD;AAeH;;AAEDC,EAAAA,MAAM,GAAG;AAEL,QAAI;AAAEP,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA0B,KAAKf,KAAL,CAAWC,QAAzC;AACA,WAEI,MAAC,GAAD;AAAK,MAAA,MAAM,EAAE,KAAKF,KAAL,CAAWuB,MAAxB;AAAgC,MAAA,IAAI,EAAE,EAAtC;AAA0C,MAAA,MAAM,EAAE;AAC9CC,QAAAA,GAAG,EAAE;AAAET,UAAAA;AAAF,SADyC;AAE9CU,QAAAA,GAAG,EAAE;AAAET,UAAAA;AAAF;AAFyC,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAII,MAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKU,aAAtB;AACI,MAAA,IAAI,EAAC,sBADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAOI,MAAC,UAAD;AAAY,MAAA,OAAO,EAAE,KAAKC,iBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CADJ,CADJ,CAPJ,CAFJ;AAgBH;;AAvD4B;;AA0DjC,eAAehC,gBAAgB,CAAC;AAC5BiC,EAAAA,MAAM,EAAGC,OAAO,CAACC,GAAR,CAAYC;AADO,CAAD,CAAhB,CAEZjC,QAFY,CAAf","sourcesContent":["import { Component } from 'react';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport Pusher from 'pusher-js';\r\nimport axios from 'axios';\r\n\r\n\r\nclass Tracking extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { location: { \"latitude\": \"1\", \"longitude\": \"1\", \"accuracy\": \"1\" } };\r\n        this.getUpdates = this.getUpdates.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUpdates();\r\n    }\r\n\r\n    getUpdates() {\r\n        var pusher = new Pusher('4b368d79d76620bdd3a5', {\r\n            authEndpoint: 'https://22e7a901651d.ngrok.io/pusher/auth',\r\n            cluster: 'eu'\r\n        });\r\n\r\n        var channel = pusher.subscribe('private-test');\r\n\r\n        channel.bind('client-driver-location', (data) => {\r\n            console.log(data)\r\n            axios.post('http://localhost:9000/api/new', {\r\n                latitude: data.latitude,\r\n                longitude: data.longitude,\r\n                accuracy: data.accuracy\r\n                          })\r\n              .then(function (response) {\r\n                console.log(response);\r\n              })\r\n              .catch(function (error) {\r\n                console.log(error);\r\n              });\r\n        });\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        let { latitude, longitude } = this.state.location;\r\n        return (\r\n\r\n            <Map google={this.props.google} zoom={14} center={{\r\n                lat: { latitude },\r\n                lng: { longitude }\r\n            }}>\r\n                <Marker onClick={this.onMarkerClick}\r\n                    name=\"{'Current location'}\" />\r\n\r\n                <InfoWindow onClose={this.onInfoWindowClose}>\r\n                    <div>\r\n                        <h1>\"this.state.selectedPlace.name\"</h1>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n    apiKey: (process.env.GMAPSKEY)\r\n})(Tracking);"]},"metadata":{},"sourceType":"module"}