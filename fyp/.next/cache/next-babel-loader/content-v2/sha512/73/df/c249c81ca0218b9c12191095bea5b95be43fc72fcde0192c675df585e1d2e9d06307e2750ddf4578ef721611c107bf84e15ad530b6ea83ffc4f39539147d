{"ast":null,"code":"let axios = require(\"axios\").default;\n\nlet getTokenOptions = {\n  method: 'POST',\n  url: 'https://leonfyp.eu.auth0.com/oauth/token',\n  headers: {\n    'content-type': 'application/json'\n  },\n  data: {\n    grant_type: 'client_credentials',\n    client_id: process.env.AUTH0_CLIENT_ID,\n    client_secret: process.env.AUTH0_CLIENT_SECRET,\n    audience: 'https://leonfyp.eu.auth0.com/api/v2/'\n  }\n};\nexport default async function updateUser(req, res) {\n  axios.request(getTokenOptions).then(function (response) {\n    axios.request({\n      method: 'PATCH',\n      url: 'https://leonfyp.eu.auth0.com/api/v2/users/' + req.body.id,\n      headers: {\n        'content-type': \"application/json\",\n        'Authorization': 'Bearer ' + response.data.access_token\n      },\n      data: {\n        \"name\": \"leon\"\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      res.send(response.data);\n    }).catch(function (error) {\n      console.error(error);\n      res.status(error.status || 500).end(error.message);\n    });\n  }).catch(function (error) {\n    console.error(error);\n    res.status(error.status || 500).end(error.message);\n  });\n}","map":{"version":3,"sources":["C:/Users/KGM/OneDrive/Documents/GitHub/chec/fyp/pages/api/auth/updateuser.js"],"names":["axios","require","default","getTokenOptions","method","url","headers","data","grant_type","client_id","process","env","AUTH0_CLIENT_ID","client_secret","AUTH0_CLIENT_SECRET","audience","updateUser","req","res","request","then","response","body","id","access_token","console","log","send","catch","error","status","end","message"],"mappings":"AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA7B;;AAEA,IAAIC,eAAe,GAAG;AACpBC,EAAAA,MAAM,EAAE,MADY;AAEpBC,EAAAA,GAAG,EAAE,0CAFe;AAGpBC,EAAAA,OAAO,EAAE;AAAE,oBAAgB;AAAlB,GAHW;AAIpBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,UAAU,EAAE,oBADR;AAEJC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,eAFnB;AAGJC,IAAAA,aAAa,EAAEH,OAAO,CAACC,GAAR,CAAYG,mBAHvB;AAIJC,IAAAA,QAAQ,EAAE;AAJN;AAJc,CAAtB;AAcA,eAAe,eAAeC,UAAf,CAA0BC,GAA1B,EAA+BC,GAA/B,EAAoC;AAEjDlB,EAAAA,KAAK,CAACmB,OAAN,CAAchB,eAAd,EAA+BiB,IAA/B,CAAoC,UAAUC,QAAV,EAAoB;AAEtDrB,IAAAA,KAAK,CAACmB,OAAN,CAAc;AACZf,MAAAA,MAAM,EAAE,OADI;AAEZC,MAAAA,GAAG,EAAE,+CAA+CY,GAAG,CAACK,IAAJ,CAASC,EAFjD;AAIZjB,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAiB,YAAYe,QAAQ,CAACd,IAAT,CAAciB;AAFpC,OAJG;AAQZjB,MAAAA,IAAI,EAAE;AAAE,gBAAQ;AAAV;AARM,KAAd,EASGa,IATH,CASQ,UAAUC,QAAV,EAAoB;AAC1BI,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACd,IAArB;AACAW,MAAAA,GAAG,CAACS,IAAJ,CAASN,QAAQ,CAACd,IAAlB;AACD,KAZD,EAYGqB,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACxBJ,MAAAA,OAAO,CAACI,KAAR,CAAcA,KAAd;AACAX,MAAAA,GAAG,CAACY,MAAJ,CAAWD,KAAK,CAACC,MAAN,IAAgB,GAA3B,EAAgCC,GAAhC,CAAoCF,KAAK,CAACG,OAA1C;AACD,KAfD;AAgBD,GAlBD,EAkBGJ,KAlBH,CAkBS,UAAUC,KAAV,EAAiB;AACxBJ,IAAAA,OAAO,CAACI,KAAR,CAAcA,KAAd;AACAX,IAAAA,GAAG,CAACY,MAAJ,CAAWD,KAAK,CAACC,MAAN,IAAgB,GAA3B,EAAgCC,GAAhC,CAAoCF,KAAK,CAACG,OAA1C;AACD,GArBD;AAuBD","sourcesContent":["let axios = require(\"axios\").default;\r\n\r\nlet getTokenOptions = {\r\n  method: 'POST',\r\n  url: 'https://leonfyp.eu.auth0.com/oauth/token',\r\n  headers: { 'content-type': 'application/json' },\r\n  data: {\r\n    grant_type: 'client_credentials',\r\n    client_id: process.env.AUTH0_CLIENT_ID,\r\n    client_secret: process.env.AUTH0_CLIENT_SECRET,\r\n    audience: 'https://leonfyp.eu.auth0.com/api/v2/'\r\n  }\r\n};\r\n\r\n\r\n\r\nexport default async function updateUser(req, res) {\r\n  \r\n  axios.request(getTokenOptions).then(function (response) {\r\n\r\n    axios.request({\r\n      method: 'PATCH',\r\n      url: 'https://leonfyp.eu.auth0.com/api/v2/users/' + req.body.id\r\n      ,\r\n      headers: {\r\n        'content-type': \"application/json\",\r\n        'Authorization': 'Bearer ' + response.data.access_token\r\n      },\r\n      data: { \"name\": \"leon\" }\r\n    }).then(function (response) {\r\n      console.log(response.data);\r\n      res.send(response.data);\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n      res.status(error.status || 500).end(error.message);\r\n    });\r\n  }).catch(function (error) {\r\n    console.error(error);\r\n    res.status(error.status || 500).end(error.message);\r\n  });\r\n\r\n}"]},"metadata":{},"sourceType":"module"}