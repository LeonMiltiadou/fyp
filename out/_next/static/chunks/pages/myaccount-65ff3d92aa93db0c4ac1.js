_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"5Ebq":function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSP",(function(){return S}));var n=r("vJKn"),a=r.n(n),s=r("rg98"),c=r("H+61"),o=r("UlJF"),u=r("7LId"),i=r("VIvw"),l=r("iHvq"),d=r("cpVT"),p=r("q1tI"),f=r.n(p),h=r("vDqi"),m=r.n(h),v=r("26zG"),b=r("6ctO"),w=r("+YzT"),y=r("wx14"),O=r("zLVn"),_=r("TSYQ"),N=r.n(_),D=r("vUet"),j=f.a.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,a=e.striped,s=e.bordered,c=e.borderless,o=e.hover,u=e.size,i=e.variant,l=e.responsive,d=Object(O.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),p=Object(D.a)(r,"table"),h=N()(n,p,i&&p+"-"+i,u&&p+"-"+u,a&&p+"-striped",s&&p+"-bordered",c&&p+"-borderless",o&&p+"-hover"),m=f.a.createElement("table",Object(y.a)({},d,{className:h,ref:t}));if(l){var v=p+"-responsive";return"string"===typeof l&&(v=v+"-"+l),f.a.createElement("div",{className:v},m)}return m})),k=f.a.createElement;function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var x=function(e){Object(u.a)(r,e);var t=g(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).state={orders:[],showAccountDetails:!1,showOrders:!0,underlineOrders:"underline",underlineAccountDetails:""},n}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUser(this.props.user.sub);case 2:return t=e.sent,e.next=5,A(t.data.app_metadata.commerceID);case 5:r=e.sent,this.setState({orders:r.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAccountDetails",value:function(){this.setState({showAccountDetails:!0,showOrders:!1,underlineAccountDetails:"underline",underlineOrders:""})}},{key:"renderOrders",value:function(){this.setState({showAccountDetails:!1,showOrders:!0,underlineAccountDetails:"",underlineOrders:"underline"})}},{key:"render",value:function(){var e=this,t=this.props.user,r=this.state,n=r.orders,a=r.showAccountDetails,s=r.showOrders,c=r.underlineOrders,o=r.underlineAccountDetails;return k("div",{className:"myaccount-page"},k("div",{className:"myaccount-nav-title"},"My Account"),k("div",{className:"myaccount-nav"},k(b.a,{variant:"dark",className:"navbar-myaccount"},k(w.a,{className:"flex-column mr-5"},k(w.a.Link,{onSelect:function(){return e.renderOrders()},href:"#"},k("h",{className:c},"Orders")),k(w.a.Link,{onSelect:function(){return e.renderAccountDetails()},href:"#"},k("h",{className:o},"Account Details")),k(w.a.Link,{href:"/api/auth/logout"},"Logout")))),k("div",{className:"account-details"},a&&k("div",null,k("h3",null,"Profile (server rendered)"),k("img",{src:t.picture,alt:"user picture"}),k("p",null,"nickname: ",t.nickname),k("p",null,"name: ",t.name)),s&&k(j,{borderless:!0,striped:!0,className:"order-table"},k("thead",null,k("tr",{className:"order-table-heading"},k("th",{scope:"col"},"ID Number"),k("th",{scope:"col"},"Order"),k("th",{scope:"col"},"Total Price"),k("th",{scope:"col"},"Status"))),k("tbody",null,n.reverse().map((function(e){return k("tr",null,k("th",{scope:"row"},e.customer_reference),k("td",null,e.order.line_items.map((function(e){return k("div",null,e.quantity," x ",e.product_name)}))),k("td",null,e.order_value.formatted_with_symbol),k("td",null,e.status_fulfillment))}))))))}}]),r}(p.Component);function A(e){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=m.a.create({baseURL:"http://af1066ac999894c68a63210ace0c9981-231019546.eu-west-2.elb.amazonaws.com:8004",timeout:3e3,headers:{Accept:"application/json","Content-Type":"application/json"}}),e.next=4,r.get("/customer/listorders/"+t).then((function(e){return e.data})).catch((function(e){return console.log("There was an error retrieving a list of orders for the customer",e),null}));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.error("There was an error retrieving a list of orders for the customer"+t,e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(d.a)(x,"contextType",v.a);var S=!0;t.default=x},"ye/m":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/myaccount",function(){return r("5Ebq")}])}},[["ye/m",0,1,2,3,7]]]);